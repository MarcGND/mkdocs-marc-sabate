{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Implantaci\u00f3 de sistemes operatius","text":"<p>Per a la documentaci\u00f3 completa visita mkdocs.org.</p>"},{"location":"#introduccio","title":"Introducci\u00f3","text":"<p>Benvinguts al projecte de documentaci\u00f3 de Marc Sabat\u00e9 mitjan\u00e7ant MkDocs, aquest projecte inclour\u00e0 tota la mat\u00e8ria relacionada a l'assignatura d'Implementaci\u00f3 de Sistemes Operatius. En aquest espai es duran a terme explicacions t\u00e8cniques dels diferents \"sprints\" i fases del projecte. La finalitat \u00e9s garantir un seguiment dels processos utilitzats per resoldre les tasques, de forma clara i concisa per ajudar a qualsevol lector.</p> <p> </p>"},{"location":"P1-S1/","title":"P1 S1","text":""},{"location":"P1-S1/#installacio-configuracio-inicial-i-programari-de-base","title":"Instal\u00b7laci\u00f3, Configuraci\u00f3 Inicial i Programari de Base","text":"<p>En aquesta primera part veurem el proc\u00e9s d'instal\u00b7laci\u00f3 d'una m\u00e0quina virtual, les llic\u00e8ncies que t\u00e9, com generar punts de restauraci\u00f3, com es fa la configuraci\u00f3 de la xarxa, a instal\u00b7lar el programari i finalment com funciona un gestor d'arrancada.</p>"},{"location":"P1-S1/#installacio","title":"Instal\u00b7laci\u00f3","text":"<p>En aquest apartat veurem pas per pas com fer la instal\u00b7laci\u00f3 d'Ubuntu i les particions que li donarem al disc en el nostre cas.</p> <ul> <li> <p>Primerament, hem de crear una m\u00e0quina nova amb la imatge ISO, seguidament li donarem l'emmagatzematge, processadors i RAM. Un cop fet aquest pas abans de comen\u00e7ar la instal\u00b7laci\u00f3 hem de configurar la xarxa des de les eines, en aquest cas escollim una NAT. </p> </li> <li> <p>A les opcions de xarxa ens connectem a la xarxa NAT que hem creat pr\u00e8viament. </p> </li> <li>Un cop tenim la configuraci\u00f3 pr\u00e8via, comencem la instal\u00b7laci\u00f3. Entrem a l'opci\u00f3 d'instal\u00b7lar. </li> <li>Seugidament triem l'idioma </li> <li>A continuaci\u00f3 les opcions d'accessibilitat, disposici\u00f3 del teclat, la connexi\u00f3 a internet i per \u00faltim seleccionem l'opci\u00f3 d'instal\u00b7lar Ubuntu amb l'opci\u00f3 interactiva i seguidament la selecci\u00f3 predeterminada. No instal\u00b7larem els programes recomanats.  </li> <li>En aquesta opci\u00f3 de configuraci\u00f3 seleccionarem la manual, aqu\u00ed podrem determinar les parts del disc i segons la necessitat donar-li m\u00e9s o menys espai a cada part.</li> <li>En primera part designarem un espai de 5GB amb un format SWAP. A continuaci\u00f3 un espai per a /home que \u00e9s la carpeta on aniran les aplicacions i documents, per tant, li donarem 30GB amb format Ext4. I en conclusi\u00f3 un espai de 18,68GB a la partici\u00f3 on anir\u00e0 situat el sistema operatiu.  </li> <li>Per anar acabant amb la instal\u00b7laci\u00f3 crearem un compte al nostre gust.  </li> <li>Finalment, podem revisar les nostres opcions abans d'instal\u00b7lar. Un cop acabat reiniciem l'Ubuntu i ja el tenim preparat per fer-lo servir.  </li> </ul>"},{"location":"P1-S1/#llicenciament","title":"Llicenciament","text":"<p>Programari Lliure (PL): ha de complir 4 llibertats:</p> <ul> <li> <p>Utilitzar-lo sense condicions</p> </li> <li> <p>Estudiar-lo i adaptar-lo a les pr\u00f2pies necessitats</p> </li> <li> <p>Distribuir-lo</p> </li> <li> <p>Millorar-lo i distribuir les modificacions</p> </li> </ul>"},{"location":"P1-S1/#-llicencia-cc","title":"- Llicencia CC","text":"<p>La llicencia CC es una eina legal i gratuita que permet protegir les obres amb drets d'autor. En aquest cas aquesta p\u00e0gina utilitzar\u00e0 una CC: BY NC SA.</p> <p></p> <p>Aquesta simbologia significa que s'ha d'atribuir l'autoria, permet l'edici\u00f3, no permet l'us comercial i permet la modificaci\u00f3 i distribuci\u00f3.</p>"},{"location":"P1-S1/#-ubuntu","title":"- Ubuntu","text":"<p>Ubuntu es sistema operatiu de codi obert i gratuit, utilitza la llicencia GNU (General public license: gnu.org), aquesta llicencia permet la copia, distribuci\u00f3 i modificaci\u00f3 del codi.  </p>"},{"location":"P1-S1/#punts-de-restauracio","title":"Punts de restauraci\u00f3","text":""},{"location":"P1-S1/#-concepte-en-ubuntu","title":"- Concepte en ubuntu","text":"<p>Amb el sistema operatiu d'ubuntu ex4 no porta punts de restauraci\u00f3 sistema de fitxers d'instantenes que treballa en volums = btrfs, no partici\u00f3. L'eina del timeshift fa imatges del sistema a les que es poden tornar.</p> <ul> <li>En primer lloc, des del terminal instal\u00b7larem el timeshift tal com s'indica a les imatges. </li> <li>Un cop tenim el timeshift instal\u00b7lat l'executem i el configurem, el programa ens permet guardar en quin estat es troben les carpetes que tenim al nostre dispositiu, amb aquest punt guardat podrem tornar amb cas de p\u00e8rdua de dades o mal funcionaments. A m\u00e9s a m\u00e9s, el timeshift t\u00e9 l'opci\u00f3 de crear punts de restauraci\u00f3 per dia, hora, m\u00e9s o setmana. </li> <li>Seguim la configuraci\u00f3 predeterminada. </li> <li>Un cop feta la configuraci\u00f3 crearem una carpeta per comprovar el funcionament. I seguidament instaurem el punt de restauraci\u00f3 i on el guardem. </li> <li>Com es pot comprovar a la seg\u00fcent imatge, ja tenim la instant\u00e0nia creada. </li> <li>Per acabar posarem en prova el seu funcionament, en aquest cas s'elimina la carpeta \"hola\", un cop esborrada anem a l'instant\u00e0nia i la restaurem, un cop acaba el proc\u00e9s podem observar que la carpeta s'ha restaurat.  </li> </ul>"},{"location":"P1-S1/#configuracio-de-xarxa-basica","title":"Configuraci\u00f3 de xarxa b\u00e0sica","text":"<p>Per configurar la xarxa en primera instancia podem veure la configuraci\u00f3 a trav\u00e9s dels par\u00e0metres a l'opci\u00f3 de xarxa. Des d'aquest punt entrem a les opcions del cablejat per comprovar quina IP tenim i amb el mode manual la podem canviar al nostre gust.  - Seguidament obrim la terminal i amb un ping comprovem que la connexi\u00f3 s'hagi establert correctament.  - L'altra opci\u00f3 per configurar la xarxa es utilitzant el terminal i canviant el netplan, en aquest cas em d'editar l'arxiu network manager.  - A continuaci\u00f3 em de guardar a l'arxiu, l'adressa i les rutes com es mostra a la seg\u00fcent imatge. Un cop fet aix\u00f2 guardem l'arxiu i apliquem el \"netplan\" amb una comanda.  - Finalment comprovem amb un altre ping si la connexi\u00f3 funciona correctament.</p>"},{"location":"P1-S1/#instalacions-de-programari","title":"Instalacions de programari","text":"<p>En aquesta secci\u00f3 veurem com instal\u00b7lar diversos programes amb diferents tipus d'executables i com fer-ho desde el terminal. \u00c9s important saber que en Ubuntu podem instal\u00b7lar programes i apliacacions desde l'App center.</p> <ul> <li>En primer lloc farem una actualitzaci\u00f3 de les apliacacions ja instalades. </li> <li>Amb la seg\u00fcent comanda eliminarem paquets del SO que ja no s'utilitzen. </li> <li>Per als paquets .deb utilitzarem la comanda dpkg -i, en aquest cas instal\u00b7larem el Pacman. Per assegurar-nos de que ho hem instal\u00b7lat correctament hi ha la comanda de dpkg -get-selections | grep pacman . Com es veu a la seg\u00fcent imatge la instal\u00b7laci\u00f3 s'ha realitzat correctament i s'executa. En casos d'error podem provar altres comandes com ara dpkg -r, dpkg -P.  </li> <li>Per desinstal\u00b7lar paquets podem utilitzar la comanda apt remove paquet, tamb\u00e9 podem utilitzar apt purge paquet, que ens eliminar\u00e0 tamb\u00e9 les configuracions. Per comprovar que hem eliminat correctament el paquet podem fer el seg\u00fcent. </li> <li>Un altra part important a l'hora d'instal\u00b7lar programari es saber que moltes vegades els arxius que ens descarregem es troben comprimits amb diferents tipus de formats, ja poden ser els .rar, .zip, .gz, .tar, etc... Per descomprimir aquests arxius podem utilitzar varies comandes segons la seva extensi\u00f3:  tar xvf arxiu.tar gunzip arxiu.gz bunzip2 arxiu.bz2 rar -x arxiu.rar unzip arxiu.zip</li> <li>Un cop estan les carpetes descomprimides ens mourem dins de la carpeta amb la comanda cd, un cop estem situats al directori utilitzarem la comanda ./configure i seguidament amb el make install instal\u00b7larem l'aplicaci\u00f3, en cas de voler-la desinstal\u00b7lar el que em fet podem entrar un altre cop al directori i fer servir la comanda make uninstall.</li> </ul>"},{"location":"P1-S1/#gestors-darrancada","title":"Gestors d'arrancada","text":"<p>Un gestor d'arranc es una eina que es troba a una partici\u00f3 del disc, la MBR (master boot record), i es la que fa que ens carregui el sistema operatiu. En aquest cas Ubuntu instal\u00b7la per defecte el GRUB, es el software que ens far\u00e0 arrancar el sistema. </p> <p>Per recuperar el gestor d'arranc podem utilitzar algunes eines en aquest cas n'he documentat dos, el bootrepair i el grub2.</p>"},{"location":"P1-S1/#-bootrepair","title":"- Bootrepair","text":"<ul> <li>En primer lloc eliminarem la carpeta grub del sistema </li> <li>A continuaci\u00f3 veurem que no ens arranca el sistema, llavors instalem la iso del bootrepair a la m\u00e0quina virtual i arrancarem el sistema amb el bootrepair.  </li> <li>Un cop arranquem amb el bootrepair \u00e9s molt senzill, sol hem de seguir els passos que ens dona el propi sitstema tal i com es mostra a continuaci\u00f3.  </li> <li>Un cop seguits tots els procediments recomanats del bootrepair sen's reiniciar\u00e0 el sistema (nota: important demontar l'imatge ISO). A continuaci\u00f3 veurem com el sistema arranca correctament. </li> </ul>"},{"location":"P1-S1/#-grub2","title":"- Grub2","text":"<ul> <li>Per comen\u00e7ar repetim el primer pas de borrar la carpeta grub del nostre sistema.  </li> <li>Seguidament instalem l'ISO del grub2 a la nostra m\u00e0quina virutal. </li> <li>A continuaci\u00f3 sen's executar\u00e0 el men\u00fa del grub2, personalment el primer que he fet es canviar l'idioma. Despr\u00e9s busquem l'opci\u00f3 de detectar els sistemes d'arrancada. Tindrem varies opcions, en aquest cas escollim la primera la generica de Linux.   </li> <li>Desrp\u00e9s s'obrir\u00e0 el sistema com de costum, un cop tenim el sistema obert em de seguir els seg\u00fcents pasos per restaurar la carpeta grub.  </li> <li>Amb aquestes comandes el que fem es instalar la carpeta grub de nou amb els permisos root, i despr\u00e9s l'actualitzem per assegurar-nos que contingui tot el necessari per una arrancada correcta del sistema. Com podem comprovar en l'\u00faltima imatge. (nota: important eliminar la ISO del grub2 al tornar a arrencar el sistema). </li> </ul>"},{"location":"P1-S2/","title":"P1 S2","text":""},{"location":"P1-S2/#introduccio","title":"Introducci\u00f3","text":"<p>En aquest sprint veurem com es gestionen els usuaris, grups  i permisos d'un sistema en Linux. Tamb\u00e9 configurarem les pol\u00edtiques de seguretat per a comptes d'usuaris i per al sistema. Instal\u00b7larem i configurarem serveis i processos essencials del sistema operatiu, crearem i administrarem sistesmes de fitxers i noces particions. Implementarem un sistema de c\u00f2pies de seguretat i per \u00faltim farem proves per comprovar el funcionament del sistema. </p>"},{"location":"P1-S2/#gestio-de-processos","title":"Gesti\u00f3 de processos","text":"<ul> <li>En primer lloc definirem un proc\u00e9s. Aquest es un programa en execuci\u00f3 que inclou dins seu: el seu codi, els recursos que te assignats i la seva execuci\u00f3. El procesos de linux poden ser en primer o en segon pla. Els que est\u00e0n en primer pla implequen una interacci\u00f3 amb l'usuari mentre que als de segon pla no es requereix aquesta interacci\u00f3.</li> <li>La primera comada que utilitzarem per llistar els procesos es \"pstree\", aquesta ens mostrar\u00e0 els processos actius que hi ha i quins son els seus fills si es que en t\u00e9, tot aix\u00f2 amb forma d'arbre, d'aqu\u00ed el nom. <pre><code>pstree\n</code></pre> </li> <li>Amb la mateixa comanda si volem saber a l'usuari que correspon i  a quin n\u00famero de proc\u00e9s tenim ho podem realitzar amb les lletres h (usuari) i p (proc\u00e9s). <pre><code>pstree -p -h usuari\n</code></pre> </li> <li>A continuaci\u00f3 veurem com matar un proc\u00e9s, per aix\u00f2 ser\u00e0 necessari saber quin n\u00famero de proc\u00e9s li correspon a cadascun d'aquestos. En el cas de matar un proc\u00e9s pare tots els processos fills haurien de morir, tot i que hi ha una possibiltat de que alg\u00fan quedi viu, i aquestos s'anomenen zombies.</li> <li>Per matar un proc\u00e9s utilitzarem la seguent comanda i el n\u00famero de proc\u00e9s: <pre><code>kill -9 (PID)\n</code></pre></li> <li>Per fer la prova he utilitzat un altre terminal i m'he guardat el seu PID, per matar el proc\u00e9s tal i com es demostra a continuaci\u00f3:  </li> <li>La comanda anterior fa una imatge dels processos, aquestos no canvien en temps real, per fer una consulta d'aquest tipus utilitzarem la comanda \"top\". <pre><code>top\n</code></pre></li> <li>Aquesta comanda ens dona molta informaci\u00f3 per columnes, i ara veurem que vol dir cada columna. PID: Identificador \u00fanic del proc\u00e9s. USER: Usuari que inicia el proc\u00e9s. %CPU: Percentatge d'\u00fas del processador. %MEM: Percentatge d'\u00fas de la mem\u00f2ria RAM. COMMAND: Nom de la comanda o programa. </li> <li>En cas d'obrir un nou proc\u00e9s (ex: navegador) aquest ens apareixer\u00e0. </li> <li>La prioritat no es pot modificar directament, per\u00f2 amb el NI (nice) si que es pot canviar, contra mes baix es el n\u00famero m\u00e9s prioritat t\u00e9. Aix\u00f2 es pot fer amb la seg\u00fcent comanda. Val a dir que caldria fer-ho des de el root ja que com sabem ens otorga m\u00e9s privilegis.</li> </ul> <p><pre><code>renice -n -n\u00baprioritat -p PID\n</code></pre>  - Aquesta comanda serveix per moments determinats la prioritat per renice no es permanent. - Seguidament tamb\u00e9 podem utilitzar la comanda \"ps aux\" que ens dona una informaci\u00f3 similar per\u00f2 amb diferents parametres que veurem a continuaci\u00f3: USER: Usuari que ha iniciat el proc\u00e9s. PID: Identificador \u00fanic del proc\u00e9s. %CPU i %MEM: Percentatge de CPU i mem\u00f2ria RAM utilitzats pel proc\u00e9s. VSZ: Mem\u00f2ria virtual total utilitzada pel proc\u00e9s. RSS: Mem\u00f2ria f\u00edsica utilitzada pel proc\u00e9s. TTY: Terminal associat al proc\u00e9s ( ? si no en te). STAT: Estat del proc\u00e9s. R   Executant-se (Running). S = Inactiu. T = Pausat. Z = Proc\u00e9s zombi. I = Inactiu o sense consumir recursos. &lt; = Alta prioritat de CPU. s = L\u00edder de sessi\u00f3. l = Multithread. + = Associat al terminal en primer pla. <pre><code>ps aux\n</code></pre>  - Amb el ps podem fer varies combinacions per mostrar informaci\u00f3 en concret a continuaci\u00f3 veurem quines s\u00f3n i que fan. <pre><code>ps -e\n</code></pre> - Mostra tots els procesos del sistema amb una sintaxis estandar. <pre><code>ps -ejH\n</code></pre> - Mostra un arbre de procesos- <pre><code>ps -eLf\n</code></pre> - Mostra la informaci\u00f3 dels fils (threads). <pre><code>ps -eM\n</code></pre> - Mostra informaci\u00f3 de seguretat <pre><code>ps -U\n</code></pre> - Mostra tots els processos de root.</p> <ul> <li>A continuaci\u00f3 veurem que s\u00f3n els processos amb segon pla i com passar processos a aquest estat. Com hem dit abans amb el kill -9 matem un proc\u00e9s i amb el ctrl+c l'aturem i amb el ctrl+z si que el passariem a segon pla. (Nota: segons el tipus de proc\u00e9s que aturem, si aquest va per terminal igaul no se'ns mostra en segon pla).</li> <li>La comada per veure els processos en segon pla es la seg\u00fcent. <pre><code>jobs\n</code></pre> </li> <li>Un cop tenim aquest proc\u00e9s localitzat i no volem matar-lo sino que el volem enviar al primer pla podem utilitzar la seg\u00fcent comanda. <pre><code>fg %n\u00ba \n</code></pre> </li> <li>En cas de voler fer el proc\u00e9s invers i enviar un proc\u00e9s al segon pla podem utilitzar: <pre><code>bg %n\u00ba\n</code></pre></li> <li>En algun cas espacial igual volderm executar algun proc\u00e9s directament amb segon pla, i es pot fer de la seguent forma. <pre><code>nomproces &amp;\n</code></pre></li> <li>A l'hora de consultar processos amb top em vist que es una eina en viu i que els processos que volem consultar es van movent i, a vegades se'ns pot fer complicat llegir-lo. En cas de voler evitar aix\u00f2 i sol consultar el PID d'un proc\u00e9s en concret podem fer servir la seg\u00fcent comanda. <pre><code>pgrep nomproces\n</code></pre> </li> <li>Un altra forma de fer-ho podria ser utilitzant comandes anteriors i afegir un grep, pero en algunes opcions com el ps aux pot quedar una mica conf\u00f3s, personalment ho recomano amb el pstree ja que aix\u00ed veurem tamb\u00e9 els processos fills. <pre><code>pstree | grep nomproces\n</code></pre> </li> <li>Per acabar, si en algun moment volem utilitzar alg\u00fan script o proc\u00e9s i que aquest tingui una prioritat predeterminada per nosaltres es pot fer amb el nice. <pre><code>nice -n n\u00baprioritat nomproces\n</code></pre> </li> <li>Amb un \"top\" podem comprovar si ha funcionat correctament. </li> </ul>"},{"location":"P1-S2/#gestio-dusuaris-grups-i-permisos","title":"Gesti\u00f3 d'usuaris grups i permisos","text":"<ul> <li>Es important que al nostres sistema tinguem diferents usuaris i que aquestos tinguen diferents caracteristiques, i que els puguem incloure en grups per classificar-los. A m\u00e9s a m\u00e9s, tamb\u00e9 ens interessar\u00e0 poder modificar-los, eliminar-los i bloquejar-los al nostre gust. Tot aix\u00f2 i m\u00e9s ho veurem a continuaci\u00f3.</li> </ul>"},{"location":"P1-S2/#-commandes-terminal-i-accessos-als-directoris","title":"- Commandes terminal i accessos als directoris","text":"<p>Per a accedir al terminal normalment ho faremt amb un crtl + alt + t, aix\u00ed obrim el pseudo terminal. El terminal com a tal l'obrirem al el ctrl dret + F3, aquest es un terminal TTY. Un pseudo terminal es com un emulador on les comandes que posem son interpretades per alg\u00fan arxiu al que fan referencia i aquest fa els procediments, en canvi amb un terminal si que estem amb contacte directe amb el sistema.</p> <ul> <li>En primer lloc veurem un document que actua com un registre de tots els comptes d'usuaris presents al sistema. Inclou dades com el nom del compte, l'identificador d'usuari (UID), el directori personal i el shell configurat per defecte. Es tracta d'un fitxer p\u00fablic, cosa que permet que qualsevol pugui consultar qui s\u00f3n els usuaris del sistema. <pre><code>nano /etc/passwd\n</code></pre> </li> <li>A continuaci\u00f3 podem veure els grups dels usuaris i l'identificador de qui es el seu administrador. <pre><code>nano /etc/group\n</code></pre> </li> <li>A continuaci\u00f3, en aquest arxiu es guarda la informaci\u00f3 relacionada amb les contrasenyes dels comptes d'usuari. Cada registre fa refer\u00e8ncia a un usuari i inclou la seva contrasenya codificada. Si apareix el s\u00edmbol \"!\", aix\u00f2 indica que el compte est\u00e0 deshabilitat i l'usuari no t\u00e9 perm\u00eds per accedir al sistema. <pre><code>nano /etc/shadow\n</code></pre> </li> <li>Per \u00faltim aquest arxiu \u00e9s comparable a /etc/group, per\u00f2 ofereix detalls extres sobre els grups. En aquest lloc es pot identificar qui s\u00f3n els administradors de cada grup. Resulta pr\u00e0ctic per controlar els permisos i gestionar els privilegis d'acc\u00e9s dels diferents grups d'usuaris. <pre><code>nano /etc/gshadow\n</code></pre> </li> </ul>"},{"location":"P1-S2/#-creacio-dusuaris","title":"- Creaci\u00f3  d'usuaris","text":"<p>Per crear usuaris tenim diverses formes de fer-ho, el m\u00e9s important es tenir clar que amb certes comandes no es creen directoris sol usuaris. A continuaci\u00f3 es mostrar\u00e0 com crear usuaris.</p> <ul> <li> <p>En primer lloc utilitzarem la seg\u00fcent comanda, aquesta ens creara un usuari pero fins que no fessim un log in amb aquest no ens crear\u00e0 els directoris. Aquesta es la forma m\u00e9s senzilla de crear els usuaris ja que et ve pautada pel propi sistema operatiu. <pre><code>adduser usuari\n</code></pre>  Per crear un nou compte d'usuari al sistema, farem servir la comanda useradd. Aquesta comanda ens permetr\u00e0 afegir usuaris al sistema amb diversos par\u00e0metres que ens ajuden a configurar les seves propietats. A continuaci\u00f3, detallem alguns dels par\u00e0metres m\u00e9s destacats que podem utilitzar:</p> </li> <li> <p>-m: Indica que es generar\u00e0 autom\u00e0ticament un directori personal per a l'usuari.</p> </li> <li> <p>-s /bin/bash: Aquest par\u00e0metre ens permet definir el shell per defecte de l'usuari.</p> </li> <li> <p>-d /home/alumne2: Amb aquest par\u00e0metre, especifiquem el directori inicial de l'usuari. Per exemple, en aquest cas, el directori personal ser\u00e0 /home/alumne2.</p> </li> <li> <p>alumne2: Correspon al nom de l'usuari que estem creant. En aquest exemple, l'usuari es dir\u00e0 \"alumne2\".</p> </li> <li> <p>&amp;&amp; passwd alumne2: Aquesta comanda s\u2019utilitza per assignar o modificar la contrasenya de l\u2019usuari \"alumne\".</p> </li> </ul> <p><pre><code>useradd usuari\n</code></pre>  - Sino utilitzem la comanda -m per als directoris els podem afegir de la seg\u00fcetn manera. <pre><code>mkdir usuari\n</code></pre> </p> <ul> <li>Si volem canviar el nom de l'usuari podem utilitzar la seg\u00fcent comanda. EN el cas que hi ha a continuaci\u00f3 volem canviar el nom d'usuari de porva2, ja que hauria de ser prova2.</li> </ul> <p><pre><code>usermod -l usernou user\n</code></pre> </p> <ul> <li>En cas de voler eliminar acc\u00e9s a un usari ho podem fer bloquejant-lo, la comanda seria la seg\u00fcent. Una forma de comprovar que s'ha bloquejat correctament es entrar a la carpeta de passwd i veurem que la contrasenya del usuari al davant t\u00e9 un signe d'exclamaci\u00f3 \"!\"</li> </ul> <p><pre><code>usermod -L usuari\n</code></pre>  - Seguint amb la creaci\u00f3 d'usuaris, si tenim un usuari bloquejat i el volem recuperar utilitzarem aquesta comanda. A l'hora de comprovar-ho ens fixarem que ja no te l'exclamaci\u00f3. <pre><code>usermod -U usuari\n</code></pre>  - Si realment el que volem es eliminar l'usuari de forma m\u00e9s permanent ho farem amb la seg\u00fcent comanda. Per comprovar si l'hem eliminat correctament podem entrar a la carpeta passwd i veurem que l'usuari ja no hi es. <pre><code>deluser usuari\n</code></pre> </p> <ul> <li>Per complementar una mica les comandes que tenim, aqu\u00ed en tenim algunes que ens poden ajudar tamb\u00e9, la seg\u00fcent elimina la \"home\" de l'usuari. <pre><code>rm -r usuari\n</code></pre></li> <li>Un dels problemes habituals es que no eliminem les homes i directoris dels usuaris, amb la seg\u00fcent comanda ho podem fer tot a la vegada. <pre><code>userdel -r usuari\n</code></pre></li> <li>En cas de voler consultar algun tipus d'informaci\u00f3 sobre algun usuari, podem fer-ho aix\u00ed. <pre><code>id usuari\n</code></pre> </li> <li>Un cop vist com es el funcionament a trav\u00e9s del terminal podrem observar com es fa per l'interficie gr\u00e0fica d'Ubuntu. Dins de la configuraci\u00f3 de sistema hem d'entrar a l'apartat usuaris, i despr\u00e9s seguirem els passos que hi ha a continuaci\u00f3.  </li> </ul>"},{"location":"P1-S2/#-creacio-de-grups","title":"- Creaci\u00f3 de grups","text":"<ul> <li>En aquest apartat veurem com funcionen els grups d'usuaris, com hem vist anteriorment podem consultar els grups i les seves contrasenyes. Important dir que quan es crea un usuari tamb\u00e9 es crea un grup amb el nom d'aquest. </li> <li> <p>Per crear un grup nou ho podem fer amb una senzilla comanda. <pre><code>addgroup grup\n</code></pre> </p> </li> <li> <p>D'altra banda si el que volem es afegir un usuari a un grup existent ho podem fer d'aquesta manera. <pre><code>adduser usuari grup\n</code></pre> </p> </li> <li> <p>L'operaci\u00f3 anterior tamb\u00e9 es pot fer amb aquesta comanda. <pre><code>gpasswd -a usuari grup\n</code></pre></p> </li> <li> <p>Per fer a un usuari administrador d'aquell grup ho podem fer aix\u00ed. Dins de la carpeta gshadow podem veure els usuaris i administradors dels grups, per reconeixels veurem la posici\u00f3 que tenen entre els \":\", l'alumne 2 es administrador d'asix1 i membre d'asix2. <pre><code>gpasswd -A usuari grup\n</code></pre> </p> </li> <li> <p>Un dels majors problemes es que quan afegim usuaris a grups amb les comandes anteriors els treu del grup on estaven, per evitar-ho hem d'utilitzar la seg\u00fcent comanda. Com comprovarem l'usuari alumne2 forma part dels dos grups d'asix i es administrador del primer. <pre><code>usermod -a -G grup usuari \n</code></pre> </p> </li> <li> <p>Per eliminar un usuari d'un grup ho farem com veurem a continuaci\u00f3. En aquest cas l'alumne2 ja te prous responsabilitats i l'eliminarem del grup d'asix1. <pre><code>gpasswd -d usuari grup\n</code></pre> </p> </li> <li> <p>L'anterior comanda tamb\u00e9 es pot fer amb aquesta altra <pre><code>deluser usuari grup\n</code></pre> </p> </li> <li> <p>Per fer un usuari el principal d'un grup en concret utilitzarem el seg\u00fcent. <pre><code>usermod -g grup usuari\n</code></pre></p> </li> <li>En cas de voler canviar el nom d'algun grup ho farem amb la seg\u00fcent comanda. <pre><code>groupmod -n grupnou grupvell\n</code></pre> </li> </ul>"},{"location":"P1-S2/#-configuracio-de-fitxers-dusuari","title":"- Configuraci\u00f3 de fitxers d'usuari","text":"<ul> <li>Com hem vist tenim una serie de comandes per defecte que tenen una serie d'efectes sobre els usuaris que hem creat. Tot aix\u00f2 es pot canviar, la seva \u00fatilitat resideix en que si volem que els nostres usuaris nous tinguin diferents directoris o incl\u00fas politiques de contrasenyes diferents. Ara veurem com es modifiquen els seg\u00fcents arxius.</li> <li>El primer arixu que modificarem es el <code>/etc/default/useradd</code> que ens permet establir els valors predefinits per als nous usuaris, com la ruta del directori personal i el shell per defecte. Per configurar-lo utilitzem la seg\u00fcent comanda. <pre><code>nano /etc/default/useradd\n</code></pre> Els parametres que es poden modificar son els seg\u00fcents:</li> <li>GROUP: Especifica el grup que s'assignar\u00e0 com a grup principal per defecte als nous usuaris. Si est\u00e0 comentat o no existeix, el sistema crea un grup nou per a cada nou usuari amb el mateix nom que l'usuari.</li> <li>HOME: Defineix la ruta base per als directoris de casa dels nous usuaris. Per defecte, \u00e9s /home. Si vols canviar la ubicaci\u00f3 dels directoris de casa, pots modificar aquest par\u00e0metre.</li> <li>INACTIVE: Estableix el nombre de dies despr\u00e9s dels quals una contrasenya expirada passar\u00e0 a estar inactiu si no es canvia. Un valor de -1 desactiva aquesta funcionalitat.</li> <li>EXPIRE: Data en qu\u00e8 l'usuari expira, en format AAAAMMDD. Si est\u00e0 comentat o no s'especifica, l'usuari no expira mai.</li> <li>SHELL: Indica el shell per defecte per als nous usuaris. El valor predeterminat \u00e9s /bin/sh, per\u00f2 es pot canviar a /bin/bash o qualsevol altre shell disponible.</li> <li>SKEL: Especifica el directori des del qual es copiaran els fitxers de configuraci\u00f3 per defecte quan es cre\u00ef un nou usuari. El valor predeterminat \u00e9s /etc/skel.</li> <li>CREATE_MAIL_SPOOL: Si est\u00e0 establert a \"yes\", es crear\u00e0 una carpeta de correu per a l'usuari nou. Per defecte, est\u00e0 establert a \"yes\". </li> <li> <p>Aquestes son unes possibles modificacions (d'exemple) </p> </li> <li> <p>Un altre fitxer que podem modificar es el de la politica de contrasenyes que es aquest <code>/etc/login.defs</code> <pre><code>nano /etc/login.defs\n</code></pre> Els parametres que ens permet modificar son:</p> </li> <li>MAIL_DIR: Defineix l'ubicaci\u00f3 del directori d'emmagatzematge de correu per als nous usuaris. Per defecte, \u00e9s /var/mail.</li> <li>PASS_MAX_DAYS: Nombre m\u00e0xim de dies que una contrasenya pot ser v\u00e0lida. Per defecte, pot ser 99999, el que significa que no expira mai.</li> <li>PASS_MIN_DAYS: Nombre m\u00ednim de dies entre canvis de contrasenya. Per defecte, \u00e9s 0, el que permet canvis immediats.</li> <li>PASS_MIN_LEN: Longitud m\u00ednima de la contrasenya; no obstant aix\u00f2, en sistemes moderns, aquest par\u00e0metre pot no tenir efecte, ja que la complexitat de la contrasenya es gestiona amb PAM (Pluggable Authentication Modules).</li> <li>PASS_WARN_AGE: Nombre de dies abans de l'expiraci\u00f3 de la contrasenya que es notifica a l'usuari. Per defecte, \u00e9s 7.</li> <li>UID_MIN i UID_MAX: Rangs m\u00ednim i m\u00e0xim per als identificadors d'usuari (UID) per als nous usuaris. Aix\u00f2 ajuda a assegurar que no es cre\u00efn usuaris amb UID que podrien entrar en conflicte amb comptes del sistema o altres usuaris.</li> <li>GID_MIN i GID_MAX: Rangs m\u00ednim i m\u00e0xim per als identificadors de grup (GID) per als nous grups.</li> <li>CREATE_HOME: Si est\u00e0 establert a \"yes\", es crea el directori de casa de l'usuari quan es crea un nou compte; si no, no es crea. Per defecte, pot ser \"no\" en alguns sistemes per raons de seguretat o per configuracions espec\u00edfiques.</li> <li>ENCRYPT_METHOD: M\u00e8tode de xifrat utilitzat per a les contrasenyes. Pot ser SHA512 o altres m\u00e8todes segons la versi\u00f3 del sistema.</li> <li>UMASK: Defineix el valor per defecte de la m\u00e0scara de permisos per als fitxers creats pels usuaris, afectant els permisos per defecte dels fitxers i directoris.</li> <li>USERGROUPS_ENAB: Si est\u00e0 establert a \"yes\", quan un usuari es suprimeix, el seu grup principal tamb\u00e9 es suprimeix si no hi ha altres membres en aquest grup.</li> </ul> <p> - Possibles modificacions (d'exemple) </p> <p>Per \u00faltim veurem el directori <code>/etc/skel</code>, dins d'aquest directori trobarem uns fitxers que son <code>.bashrc</code> <code>.profile</code> i <code>.bash_logout</code>. Aquestos fitxers s\u00f3n scripts de configuraci\u00f3 per al shell Bash i Sh que permeten personalitzar l'entorn de l'usuari.</p> <ul> <li>Quan es crea un nou usuari amb un directori home, el contingut d'aquest directori /etc/skel es copia al nou directori home de l'usuari. Aix\u00f2 permet configurar arxius i directoris per defecte per a tots els nous usuaris. </li> </ul> <p></p> <p><code>.bashrc</code>:</p> <p>Aquest arxiu s'executa cada vegada que es crea un nou shell interactiu que no \u00e9s un shell de login (per exemple, quan obres una nova finestra de terminal). Es pot utilitzar per:</p> <ul> <li> <p>Definir variables d'entorn: Per a variables que no necessiten ser establertes en el context de login.</p> </li> <li> <p>Ajustar alias: Crear atacs r\u00e0pids per a comandaments llargs o freq\u00fcents.</p> </li> <li> <p>Configurar funcions de shell: Afegir funcions personalitzades per facilitar tasques rutin\u00e0ries.</p> </li> <li> <p>Personalitzar el prompt: Canviar l'aparen\u00e7a del prompt del terminal.</p> </li> <li> <p>Establir par\u00e0metres de shell: Com historial, compleci\u00f3 de comandaments, etc.</p> </li> <li> <p>A continuaci\u00f3 un exemple d'us, canviant un \"alias\". Farem que ll sigui equivalent a la comanda ls -l, aix\u00ed cada cop que posem ll s'executar\u00e0 un ls -l.</p> </li> </ul> <p> </p> <p><code>.profile</code>:</p> <p>Aquest fitxer s\u2019executa autom\u00e0ticament quan l\u2019usuari inicia sessi\u00f3. Serveix per definir variables d\u2019entorn i aplicar altres configuracions globals. Alguns exemples d\u2019\u00fas s\u00f3n:</p> <ul> <li> <p>Definir variables d\u2019entorn, com PATH.</p> </li> <li> <p>Configurar el prompt o ajustar altres opcions del shell.</p> </li> <li> <p>Carregar altres fitxers de configuraci\u00f3, com .bashrc, si existeix.</p> </li> <li> <p>A continuaci\u00f3 un exemple d'us, canviarem l'editor de text per defecte i farem que sigui nano, ja que es el que m\u00e9s utilitzo.</p> </li> </ul> <p> </p> <p><code>.bash_logout</code></p> <p>Aquest fitxer s\u2019executa de forma autom\u00e0tica quan l\u2019usuari tanca una sessi\u00f3 interactiva. \u00c9s especialment \u00fatil per a:</p> <ul> <li> <p>Alliberar recursos o aturar processos temporals.</p> </li> <li> <p>Mostrar missatges de comiat o finalitzaci\u00f3 de sessi\u00f3.</p> </li> <li> <p>Executar scripts personalitzats per tasques de manteniment.</p> </li> <li> <p>A continuaci\u00f3 configurarem un missatge de sortida.</p> </li> </ul> <p> </p>"},{"location":"P1-S2/#gestio-de-permisos","title":"Gesti\u00f3 de permisos","text":"<p>En els casos d'un sistema multiusuari on vulguem que diferents usuaris tinguin certs permisos per\u00f2 no els mateixos, \u00e9s important fer una bona gesti\u00f3 d'aquestos. Hi han vaires maneres de gestionar-ho, i les veurem a conitnuaci\u00f3.</p>"},{"location":"P1-S2/#-permisos-estandars","title":"- Permisos estandars","text":"<ul> <li>Els permisos estandars son una serie de permisos b\u00e0sics que es poden donar a tots els usuaris i grups. Els grups poden tenir diferents permisos respecte als usuaris, una forma de comprovar aix\u00f2 ho podem fer de la seg\u00fcent forma. <pre><code>ls -l \n</code></pre> </li> <li>En aquest cas podem observar que el primer root que apareix \u00e9s de l\u2019usuari i el segon \u00e9s del grup principal. Tamb\u00e9 surt la data de creaci\u00f3 i noms de directori, per\u00f2 la part important \u00e9s al principi. </li> <li>Aqu\u00ed es on podem apreciar els permisos que hi han dins dels directoris. Despr\u00e9s de la lletra d, els primers permisos s\u00f3n els d'usuari \"rwx\" en aquest cas, aix\u00f2 vol dir que por llegir, escriure i executar, b\u00e0sicament te tots els permisos. Despr\u00e9s els seg\u00fcents permisos son els de grup equivalents a les 3 lletres seg\u00fcents: \"r-x\", en aquest cas com podem veure no te permisos per escriure. I per \u00faltim tenim els ultims 3 car\u00e0cters que equivalen a altres, usuaris que no s\u00f3n ni usuari principal ni formen part del grup principal, en aquest cas: \"r-x\", la mateixa situaci\u00f3 que abans no poden escriure per\u00f2 si llegir i executar. Aquest exemple es amb \"root\".</li> <li>A continuaci\u00f3 veurem com nosaltres podem agregar permisos als usuaris i grups.  <pre><code>chmod -R\n</code></pre></li> <li>Opcions de fitxer/carpeta <pre><code>chrgp -R\n</code></pre></li> <li>Grup propietari fitxer/carpeta <pre><code>chown - R\n</code></pre></li> <li>Propietari fitxer/carpeta.</li> <li>Cada lletra dels permisos te un significat associat: u = usuari, g = grup, o = others, a = all.</li> </ul>"},{"location":"P1-S2/#-permisos-especials","title":"- Permisos especials","text":""},{"location":"P1-S2/#-sticky","title":"- Sticky","text":"<ul> <li>L'sticky es un perm\u00eds d'acc\u00e9s per fitxers i directoris. Quan l'apliquem l'\u00fanic usuari que el pot canviar es el root. Es pot aplicar de la seg\u00fcent manera. <pre><code>chmod +t directori\n</code></pre> <pre><code>chmod 1775 directori\n</code></pre></li> <li>Aix\u00f2 es molt \u00fatil en sistemes multiusuari ja que sol el root i l'usuari que ha creat cert directori poden borrar o modificar el directori, els altres sol tenen permisos de lectura o escriptura. En cas de voler eliminar l'sticky podem utilitzar la seg\u00fcent comanda. <pre><code>chmod -t directori\n</code></pre></li> </ul>"},{"location":"P1-S2/#-sgid","title":"- sgid","text":"<ul> <li>sgid es un perm\u00eds que esta relacionar amb els grups i principalment permet que qualsevol usuari executi l'arxiu com si fos part del grup al que pertany aquell arxiu. Per utilitzar-la podem fer el seg\u00fcent. <pre><code>chmod g+s\n</code></pre></li> </ul>"},{"location":"P1-S2/#-suid","title":"- suid","text":"<ul> <li>suid permet que un arxiu s'executi com si fos el propietari independentment de l'usuari que l'executi. Aquest a diferencia del sgid i sticky no es pot fer un script. <pre><code>chmod g+s \n</code></pre></li> </ul>"},{"location":"P1-S2/#-llistes-de-control-dacces-acls","title":"- Llistes de control d'acc\u00e9s (ACLs)","text":"<ul> <li>Una llista de control d'acc\u00e9s son una serie de regles que ens permeten uns accesos a sistemes de fitxers en aquest cas. Aquestes llistes ens poden donar uns accesos mes restrictius o mes permisius segons la configuarci\u00f3 que faci l'usuari. Per crear una ACL utilitzem la seg\u00fcent comanda. <pre><code>setfacl\n</code></pre> <pre><code>setfacl -m user:usuari:rw- exemple.text\n</code></pre> <pre><code>setfacl -m group:grup:rwx carpeta\n</code></pre> <pre><code>setfacl -b fitxer o carpeta\n</code></pre></li> <li> <p>Les restriccions venen donades per les lletres com hem vist abans, utilitza la mateixa nomenclatura. Per comprovar si les restriccions s'han aplicat correctament podem utilitzar la seg\u00fcent comanda. <pre><code>getfacl\n</code></pre> </p> </li> <li> <p>Si ens em equicocat a l'hora de configurar alguna ACL podem eliminar totes les excepcions. (TOTES). <pre><code>setfacl -x usuari carpeta\n</code></pre></p> </li> </ul>"},{"location":"P1-S2/#-umask","title":"- Umask","text":"<ul> <li>Umask s'utilitza per canviar la mascara del mode de creaci\u00f3 d'arxius, auesta determina el valor inicial dels permisos que tindran els arxius que es creein. De forma predeterminada la mascara te el valor dels bits de perm\u00eds que NO s'han d'establir, per aix\u00f2 fem l'operaci\u00f3 de negaci\u00f3. Amb les seguents imatges entendrem millor la situaci\u00f3.</li> </ul> <p>  - El que esta fetn umask es una operaci\u00f3 coneguda com NOR, el que equivaldria a una resta convencional. - Aquestes operacions es poden realitzar amb la seg\u00fcent comanda, tot i que aix\u00f2 sol funcionar\u00e0 temporalment (els arxius ja creats no canvien de permisos). <pre><code>umask + n\u00ba\n</code></pre> - Per a que els canvis siguin permanents tenim que modificar la umask al arxiu que tenim a la seg\u00fcent ruta. <pre><code>/etc/login.defs\n</code></pre> - Un cop obert l'arxiu modifiquem el valor de la umask per defecte i aquest canvi si que es permantent. </p>"},{"location":"P1-S2/#sistemes-de-fitxers-i-particions","title":"Sistemes de fitxers i particions","text":""},{"location":"P1-S2/#-estructura-de-la-informacio","title":"- Estructura de la informaci\u00f3","text":"<ul> <li>L'estructura de la informaci\u00f3 la podem dividir en diverses parts: la f\u00edsica que seria el disc (s\u00f2lid o mec\u00e0nic), i l'estructura l\u00f2gica que pot ser (gpt o mbr). La part l\u00f2gica pot ser consultada a trav\u00e9s de commandes per la terminal tal i com es mostra a continuaci\u00f3: <pre><code>gdisk /dev/sda\n</code></pre> </li> <li>Els discs estan dividits amb blocs i dins de cada bloc tenim uns sectors. El sector \u00e9s la unitat m\u00ednima f\u00edsica on es guarden les dades i per defecte \u00e9s 512 bytes, per\u00f2 el SO no treballa en sectors treballa en blocs. El bloc \u00e9s la unitat m\u00ednima l\u00f2gica on es guarden les dades per defecte. La mida del sector no es pot canviar ve definida de f\u00e0brica, per\u00f2 la mida del bloc si es pot canviar. Quan formatem la partici\u00f3. Per consultar les mides del sector podem utilitzar les seguents comandes. <pre><code>fdisk -l\n</code></pre> </li> <li>Com hem vist tamb\u00e9 ens surt on es troba instalat el sistema operatiu (part resaltada de l'imatge anterior). Per seguir analitzant les mides de les particions podem utilitzar la seg\u00fcent comanda. <pre><code>tune2fs -l /dev/sda | grep Block\n</code></pre> </li> <li>Seguidament si necessitem saber la informaci\u00f3 de les particions i sistemes de fitxers que s'utilitzen podem utilitzar aquesta comanda. <pre><code>df -T\n</code></pre> </li> <li>Les mides dels blocs segons el tipus de fitxers que es guardin ens pot donar problemes, ara veurem dos possibles problemes amb les seves respectives solucions.</li> </ul>"},{"location":"P1-S2/#-fragmentacio-interna","title":"- Fragmentaci\u00f3 interna","text":"<p>La fragmentaci\u00f3 interna \u00e9s l\u2019espai que desaprofitem dels blocs perqu\u00e8 no s\u2019acaben d\u2019emplenar. Una soluci\u00f3 possible \u00e9s canviar la mida del block redu\u00efm la fragmentaci\u00f3 interna, per\u00f2 pots fragmentar un arxiu (baixes el rendiment), busquem un equilibri. Aquesta canvi de mida per reduir l'espai del bloc ens pot servir si emmagatzemem arxius que no tinguin una mida molt gran, com podiren ser els fitxers de text. D'altra banda si volem guardar fitxers mes grans com podrien ser pel\u00b7licules o ISOs em de fer m\u00e9s gran la mida del bloc perqu\u00e9 sino fragmentarem molt els arxius. RECOMANACI\u00d3! buscar sempre un equilibri i emmagatzemar els tipus d'arxius diferents en particions diferents, per no barrejar \"pelis amb textos\".</p>"},{"location":"P1-S2/#-fragmentacio-externa","title":"- Fragmentaci\u00f3 externa","text":"<p>La fragmentaci\u00f3 externa \u00e9s quan el disc fa temps que treballa i els arxius es guarden en blocs separats i no continus, aix\u00f2 ens fa baixar el rendiment, aquesta baixada de rendiment es pot solucionar desfragmentant el disc. La desfragmentaci\u00f3 intenta ordenar els arxius per a que no estiguin .</p>"},{"location":"P1-S2/#-tipus-de-formateig","title":"- Tipus de formateig","text":"<p>Hi ha tres maneres de formatar un disc i son les seg\u00fcents.</p> <ul> <li> <p>R\u00e0pid: Aquest formateig no borra els arxius, elimina el sistema de fitxers i en cas d'haver-hi un bloc defectuos s'ignora.</p> </li> <li> <p>Nivell mig: Aquest tampoc elimina els arxius sin\u00f3 que elimina el sistema de fitxers igual que ho fa el r\u00e0pid, la diferencia es que el mig detecta i marca els sectors i/o blocs defectuosos, sense reperar-los.</p> </li> <li> <p>Nivell baix: En aquest igual necessitem alg\u00fan programa extern. I en aquest cas si es borren els arxius, es borra tot i intenta reparar els blocs defectuosos. \u00c9s el m\u00e9s lent dels tres. Amb commandes tamb\u00e9 tal i com es mostra a continuaci\u00f3. Hi ha una command per mostar la cantitat de fragmentaci\u00f3 que tenim a la partici\u00f3 en concret (ens recomana si em de desfragmentar o no), i despr\u00e9s una altra per desfragmentar-lo. <pre><code>e4defrag -c /dev/sda2 (consulta)\n</code></pre> <pre><code>e4defrag /dev/sda2 (desfragmentaci\u00f3)\n</code></pre> </p> </li> </ul>"},{"location":"P1-S2/#-particions","title":"- Particions","text":""},{"location":"P1-S2/#-creacio-de-particions-i-formateig","title":"- Creaci\u00f3 de particions i formateig","text":"<ul> <li>En primer lloc per entrar a un disc utilitzem la comanda: <pre><code>fdisk /dev/sdb\n</code></pre></li> <li>Aqu\u00ed assignem la configuraci\u00f3 de la partici\u00f3, en aquest cas seguim amb la configuraci\u00f3 per defecte fins al punt de la mida dels sectors, el primer (0-2048) esta reservat per al arrel?, i despr\u00e9s assignem l'espai que vulguem. I finalment confirmem la configuraci\u00f3.</li> </ul> <ul> <li>Amb la comanda de fdisk -l, mirem la configuraci\u00f3 que em fet sigui correcte.</li> </ul> <ul> <li>Per definir la mida del bloc que volem configurar podem utilitzar la seg\u00fcent comanda. Amb aquesta comanda fem la creaci\u00f3 d'una partici\u00f3 amb el format d'arxius que vulguem.  <pre><code>mkfs.ext4 -b 2048 /dev/sdb1\n</code></pre> </li> <li>Per assegurar-nos de les mides podem utilitzar la seg\u00fcent comanda. </li> </ul>"},{"location":"P1-S2/#-muntatge","title":"- Muntatge","text":"<ul> <li> <p>Dos opcions: temporal i definitiva:</p> </li> <li> <p>Temporal: mount es temporal, un cop montem la partici\u00f3 els fitxers que hi havien abans no apareixen i visceversa. Per comprovar aix\u00f2 podem seguir els seg\u00fcents passos crear un arxiu abans del muntatge i un despr\u00e9s, aix\u00ed veurem que quan el disc esta muntat sol veiem l'arxiu que em fet mentres aquest estava muntat, en canvi l'arxiu previ sol el podrem visualitzar despr\u00e9s de desmuntar-lo, mentres estigui muntat no el veurem. En aquest exemple fem una carpeta \"particio1\" i dins posem un arxiu \"hola\".</p> </li> </ul> <p></p> <ul> <li>Al fer un ls veiem que no ens apareix l'arxiu hola sino un que es diu \"lost+found\".</li> </ul> <p></p> <ul> <li>Despr\u00e9s provem de fer un arxiu nou adeu dins la partici\u00f3 i com veiem aquest si ens apareix al fer un ls de la carpeta.</li> </ul> <p></p> <ul> <li>Permanent: es al fitxer <code>/etc/fstab</code></li> </ul> <p></p> <p>En aquest fitxer podem definir els seg\u00fcents parametres:</p> <ul> <li> <p>/dev/sdb1: \u00c9s el dispositiu de bloc que es muntar\u00e0.</p> </li> <li> <p>/home: \u00c9s el punt de muntatge, el directori on es muntar\u00e0 el sistema de fitxers de /dev/sdb1. En aquest cas, es munta a /home.</p> </li> <li> <p>ext4: \u00c9s el tipus de sistema de fitxers que utilitza la partici\u00f3 /dev/sdb1.</p> </li> <li> <p>defaults: S\u00f3n les opcions de muntatge. defaults significa que s'utilitzen les opcions est\u00e0ndard de muntatge per a ext4.</p> </li> <li> <p>0: El primer zero es refereix a l'opci\u00f3 dump, que indica si el sistema de fitxers ha de ser copiat amb dump (un programa de c\u00f2pia de seguretat). Un valor de 0 significa que no es far\u00e0 c\u00f2pia de seguretat autom\u00e0ticament.</p> </li> <li> <p>0: El segon zero \u00e9s per a l'opci\u00f3 pass, que indica l'ordre en qu\u00e8 fsck (programa de comprovaci\u00f3 i reparaci\u00f3 de sistemes de fitxers) ha de ser executat en el sistema de fitxers durant l'inici. Un valor de 0 significa que fsck no es far\u00e0 autom\u00e0ticament en aquest sistema de fitxers.</p> </li> </ul>"},{"location":"P1-S2/#-comparticio-de-la-carpeta-a-traves-dels-servidors-samba","title":"- Compartici\u00f3 de la carpeta a trav\u00e9s dels servidors SAMBA","text":""},{"location":"P1-S2/#ext4","title":"ext4","text":"<ul> <li>El primer pas en el nostre cas es canviar a l'adaptador pont de la nostra m\u00e0quina virtual.</li> </ul> <ul> <li>Seguidament instal\u00b7lem el smb client. L'eina smbclient et permet accedir als recursos compartits d'un servidor SMB, de manera similar a un client FTP de l\u00ednia de comandes. La pots utilitzar, per exemple, per carregar i descarregar fitxers cap a i des d'un recurs compartit. <pre><code>apt install smbclient\n</code></pre></li> </ul> <ul> <li>Despr\u00e9s instal\u00b7larem el nautilus. <pre><code>apt install nautilus-share\n</code></pre></li> <li>Per comprovar si el nautilus funciona hem de seleccionar l'opci\u00f3 de <code>recursos compartits</code> d'un directori, el mes probable es que no funcioni.</li> </ul> <ul> <li> <p>Per continuar com aquest pas no ens ha funcionat instal\u00b7lem samba. <pre><code>apt install samba\n</code></pre> </p> </li> <li> <p>Un cop tenim samba instal\u00b7lat accedirem a un dels seus arxius de configuraci\u00f3. <code>smb.conf</code>. En aquest arxiu afegirem la nostra partici\u00f3 i la configurarem per l'usuari \"platano\" tal i com es mostra a continuaci\u00f3. <pre><code>nano /etc/samba/smb.conf\n</code></pre> </p> </li> <li> <p>Per acabar amb la configuraci\u00f3 de l'arxiu i els canvis s'apliquin hem de reiniciar el sistema. </p> </li> <li> <p>Abans de procedir canviarem algunes opcions de permisos i propietats del grup, com es mostra a continuaci\u00f3. Tamb\u00e9 utilitzarem el nobody nogroup, aix\u00f2 es fa per assegurar que el servei no exposi accidentalment m\u00e9s del sistema del que est\u00e0 pensat.</p> </li> </ul> <p></p> <ul> <li>Per acabar, crearem l'usuari \"platano\" per al qual em configurat el servidor samba.</li> </ul> <p></p> <ul> <li>A continuaci\u00f3, desde la nostra m\u00e0quina (no virtual) visualitzarem els recursos compartits de la seg\u00fcent manera:</li> </ul> <p></p> <ul> <li>Per connectar-nos al servidor compartit ho farem a trav\u00e9s del navegador de fitxers, a l'apartat d'altres ubicacions i introduriem l'ardre\u00e7a corresponent.</li> </ul> <p> </p> <ul> <li>Com es pot veure a l'imatge, he creat un directori anomenat si, per comprovar que funciona la connexi\u00f3 amb els dos sentits, i que desde la m\u00e0quina virtual tamb\u00e9 pot veure el que ha fet platano. </li> </ul>"},{"location":"P1-S2/#ntfs","title":"ntfs","text":"<ul> <li> <p>En primer lloc consultarem l'estat del nostre disc amb la comanda <code>fdisk -l</code> per assegurar-nos de que encara tenim espai per un altra partici\u00f3. </p> </li> <li> <p>Ens queda encara 1G per seguir, per tant, farem els mateixos passos que abans. Menys en la part del muntatge. </p> </li> <li> <p>Per assegurar-nos que ho hem fet correctament podem tornar a fer un <code>fdisk -l</code> </p> </li> <li> <p>En aquest pas es on es troba la diferencia, formatarem la partici\u00f3 per amb un sistema de fitxers diferent.  </p> </li> <li> <p>Seguidament, farem els mateixos passos que a la particio1, creem un directori i dins un arixu hola. </p> </li> <li> <p>En aquest cas volem fer un muntatge definitiu, aix\u00ed que modificarem l'arxiu <code>fstab</code>. L'\u00fanica diferencia ser\u00e0 donar-li el format NTFS. Tamb\u00e9 afegirem el uid i gid amb nobody nogroup, tal i com hem fet amb l'ext4, amb la diferencia que aqu\u00ed ho apliquem directament al fstab per el format d'arxiu NTFS. </p> </li> <li> <p>Per continuar, assignarem al fitxer de configuraci\u00f3 de samba a l'usuario platano per a poder accedir al servidor, tal i com hem fet abans. </p> </li> <li> <p>Comprovem igual que hem fet abans desde el nostre client (fora de la maquina virtual) que veiem la partici\u00f3 creada.  </p> </li> <li> <p>Per \u00faltim creem un directori nou per fer-li proves.  </p> </li> <li> <p>Ara comprovarem si el nostre servidor samba tamb\u00e9 funciona amb un sistema operatiu windows, per fer-ho crearem una m\u00e0quina virtual windows 10, i entrarem desde el \"explorador d'archivos\" a l'apartat de xarxa i ens connectarem a una nova unitat de xarxa tal i com es mostra a continuaci\u00f3. </p> </li> <li> <p>Com es pot veure he seleccionat l'opci\u00f3 \"conectar con otras credenciales\", aix\u00f2 es per a que platano pugui entrar. </p> </li> <li> <p>Tamb\u00e9 podem veure la carpeta de proves que hem creat abans. </p> </li> <li> <p>Per comprovar si el funcionament es bidireccional crearem una altra carpeta de proves.  </p> </li> </ul>"},{"location":"P1-S2/#copia-de-seguretat-i-automatitzacio-de-tasques","title":"Copia de seguretat i automatitzaci\u00f3 de tasques","text":""},{"location":"P1-S2/#teoria","title":"Teoria","text":"<p>Hi han tres tipus de copies: completes, diferencials, incrementals. Bona politica de copies, bona gesti\u00f3 dels tipus. </p> <ul> <li> <p>Completa: Sempre que es pugui fer una copia completa, (buscar teoria, ventatga principal, desaventatge principal, i quina hem de recuperar). </p> </li> <li> <p>Diferencials: copia la diferencia de la completa, sempre de la \u00faltima, es m\u00e9s rapida. Pero per a recuperar-la sempre fan falta tant l'\u00faltima completa com l'\u00faltima diferencial, ocupa menys espai.</p> </li> <li> <p>Incremental: Copia la diferencia de la completa, despr\u00e9s per\u00f2 sol copia l'anterior incremental, hauries de recuperar totes les incrementals. Menys espai, per recuperar farira falta l'\u00faltima completa i totes les incrementals.</p> </li> </ul>"},{"location":"P1-S2/#programes-sol-1-opcio","title":"Programes (sol 1 opci\u00f3)","text":""},{"location":"P1-S2/#deja-dup-opcional","title":"Deja-dup (opcional)","text":""},{"location":"P1-S2/#duplicity","title":"Duplicity","text":""},{"location":"P1-S2/#comandes","title":"Comandes","text":""},{"location":"P1-S2/#explicacio-i-taula-comparativa","title":"Explicaci\u00f3 i taula comparativa","text":""},{"location":"P1-S2/#cp","title":"cp","text":"<ul> <li>\u00c9s una copia simple no intel\u00b7ligent. Copia tot sense miraments sol funciona en local.</li> </ul>"},{"location":"P1-S2/#rsync","title":"rsync","text":"<ul> <li>Es una copia intel\u00b7ligent sol copia els fitxers modificats, copies entre maquines utilitzant ssh.</li> </ul>"},{"location":"P1-S2/#dd","title":"dd","text":"<ul> <li>No es per fer copies de fitxers / arxius, sino a nivell particions i disc, es com una clonaci\u00f3. Treballa a nivell local i copia tot, no es intel\u00b7ligent. Tamb\u00e9 serveix per sobrescriure dades sector a sector, diferent a formatar, dona seguretat per no recuperar les dades previes, esborra tot a nivell de bloc.</li> </ul>"},{"location":"P1-S2/#automatitzacio-amb-scripts-cron-i-anacron","title":"Automatitzaci\u00f3 amb scripts, cron i anacron","text":""},{"location":"P1-S2/#diferencies-entre-anacron-i-cron","title":"Diferencies entre anacron i cron","text":"<p>Cron: </p> <ul> <li>Funci\u00f3: Automatitza tasques espec\u00edfiques en moments precisos (hora, dia, mes, etc.).</li> <li>\u00das: \u00c9s \u00fatil quan vols que una tasca s'executi a una hora concreta, per exemple, cada dia a les 2:00 AM. </li> <li>Limitaci\u00f3: Nom\u00e9s funciona quan l'ordinador est\u00e0 enc\u00e8s; si est\u00e0 apagat en el moment programat, la tasca no s'executar\u00e0.</li> </ul> <p>Anacron:</p> <ul> <li>Funci\u00f3: Tamb\u00e9 automatitza tasques, per\u00f2 est\u00e0 dissenyat per a m\u00e0quines que no estan sempre enceses.</li> <li>\u00das: Ideal per a tasques de manteniment del sistema que no depenen de l'hora exacta, com actualitzacions peri\u00f2diques. Quan engeguem l'ordinador, anacron comprova si hi ha tasques pendents i les executa.</li> <li>Avantatge: Funciona b\u00e9 en ordinadors que es tanquen sovint, ja que no es perd cap tasca programada.</li> </ul> <p>Cron: Per tasques espec\u00edfiques per a un usuari o quan necessites precisi\u00f3 temporal (per exemple, backups diaris a una hora concreta).</p> <p>Anacron: Per tasques generals, com manteniment del sistema que no requereixen ser executades en un moment exacte.</p> <p>Configuraci\u00f3 de cron:</p> <ul> <li>Arxiu global: <code>/etc/crontab</code> per tasques que afecten tots els usuaris.</li> <li>Usuari espec\u00edfic: Utilitza crontab -e -u usuari per configurar tasques per a un usuari particular.</li> <li>Carpetes predeterminades: Dins de <code>/etc/cron.daily/</code>, <code>/etc/cron.monthly/</code>, i <code>/etc/cron.annually/</code> per scripts que s'executin di\u00e0riament, mensualment o anualment, respectivament.</li> </ul> <p>Configuraci\u00f3 de anacron:</p> <ul> <li>Arxiu: <code>/etc/anacrontab</code> on es defineixen les tasques d'anacron.</li> </ul> <p></p>"},{"location":"P1-S2/#exemple-dun-script","title":"Exemple d'un script","text":"<ul> <li>Per preparar un script primer crearem els directoris que volem copiar, que es troben dins del directori Imatges.</li> </ul> <ul> <li>En primer lloc crearem un script que crea una copia comprimida del directori /home/alumnat/Imatges/ i el desa a l'escriptori amb un nom que inclou la data i hora actuals.</li> </ul> <ul> <li>A continuaci\u00f3 dins del fitxer crontab, afegim la ruta del nostre script. Com es pot verue a la seg\u00fcent imatge li definim el minut hora i dia del mes, i amb un * a l'apartat dels dies per a que es faci cada dia.</li> </ul> <ul> <li>Per comprovar el seu funcionament esperem fins l'hora que em designat, com es veu a la seg\u00fcent imatge es crea l'arxiu comprimit, al descomprimir-lo podem veure que si ha fet la copia dels dos directoris que hi ha a la carpeta Imatges.</li> </ul> <ul> <li>A continuaci\u00f3 deixem la linea del crontab comentada. I seguidament del nostre escript li traurem el punt sh i el mourem a la carpeta de cron.daily.</li> </ul> <ul> <li>Per assegurar que l'script s'executi al obrir l'ordinador, obrim el fitxer <code>/var/spool/anacron/cron.daily</code>, aqu\u00ed s'indica l'\u00faltima vegada que es van executar les tasques di\u00e0ries. En aquest cas ens interessa que no hi hagui res.</li> </ul> <ul> <li>Amb l'script al lloc de les tasques diaries i amb la comprovaci\u00f3 de que no s'han realitzat encara obrim <code>/etc/anacrontab</code> i el configurem tal i com es mostra a continuaci\u00f3. Posem que s'executin en 1 minut despr\u00e9s de l'arrencada del dispositiu.</li> </ul> <ul> <li>Un cop reiniciat l'ordinador esperem un minut i veurem que a l'escriptori apareix la copia del directori imatges, i si mirem el cron.daily veurem que s'ha executat la tasca diaria.</li> </ul>"},{"location":"P1-S2/#quotes-de-disc","title":"Quotes de disc","text":"<p>Les quotes de disc s\u00f3n unes limitacions imposades a l'\u00fas d'emmagatzematge d'un sistema en aquest cas cas Ubuntu. \u00c9s poden limitar tant per usuaris com per grups, aix\u00f2 es fa per optimitzar l'espai i no fer un malbaratament d'espai. Les quotes es poden modificar en entorns de servidors o ordinadors multiusuari, i els limets pot ser tant de mida com de n\u00famero de fitxers.</p> <ul> <li>En aquest cas assignarem un disc nou de 5GB per fer proves, com hem vist en passos anteriors fem una partici\u00f3 nova amb tot l'espai del disc i format d'arxius ext4.</li> </ul> <p></p> <ul> <li> <p>Per configurar les quotes de disc haurem d'instal\u00b7lar quota. <pre><code>sudo apt update\n</code></pre> <pre><code>sudo apt install quota\n</code></pre> </p> </li> <li> <p>Per fer les proves crearem una carpeta \"dades\"</p> </li> </ul> <p></p> <ul> <li> <p>En aquest punt ens interessar\u00e0 fer un muntatge permanent i posar les quotes a l'arxiu fstab. Aplicarem quotes d'usuari i de grup.  </p> </li> <li> <p>A continuaci\u00f3, farem un reinici del sistema i comprovarem el muntatge i afegirem els fitxers de les quotes d'usuari i de grup, i tamb\u00e9 les activarem. Per provar les quotes assignarem un usuari nou anomenat usuari5. Finalment amb un ls comprovarem que els canvis s'hagin aplicat. <pre><code>quotacheck -cug /mnt/dades\n</code></pre> <pre><code>quotaon /mnt/dades\n</code></pre> </p> </li> <li> <p>Per veure les quotes assignades a l'usuari5 podem comprovar-ho de la seg\u00fcent forma. </p> </li> <li> <p>Com podem veure encara no te cap quota assignada, per fer-ho podem utilitzar la seg\u00fcent comanda. <pre><code>edquota -u usuari5\n</code></pre>  L'arxiu que modificarem cont\u00e9 aquests parametres:</p> </li> <li> <p>Filesystem (/dev/sdc1): Aquest \u00e9s el sistema de fitxers o partici\u00f3 del disc on s'apliquen les quotes.</p> </li> <li> <p>blocks: Representa l'espai en disc actualment utilitzat per l'usuari en blocs.</p> </li> <li> <p>soft: 1024 \u00e9s el l\u00edmit \"soft\" d'espai en blocs que l'usuari pot utilitzar. Aquest l\u00edmit pot ser excedit temporalment, per\u00f2 es recomana no sobrepassar-lo.</p> </li> <li> <p>hard: 2048 \u00e9s el l\u00edmit \"hard\" d'espai en blocs. Aquest l\u00edmit no es pot excedir. Si l'usuari intenta utilitzar m\u00e9s espai del que li correspon per aquest l\u00edmit, no podr\u00e0 guardar m\u00e9s dades.</p> </li> <li> <p>inodes:Representa el nombre d'inodes (estructures de dades que representen fitxers) actualment utilitzats per l'usuari.</p> </li> <li> <p>soft: \u00c9s el l\u00edmit \"soft\" per al nombre d'inodes. No est\u00e0 establert en aquest cas, indicant que no hi ha l\u00edmit soft per al nombre de fitxers.</p> </li> <li> <p>hard: \u00c9s el l\u00edmit \"hard\" per al nombre d'inodes. Com amb el l\u00edmit soft, no est\u00e0 establert.</p> </li> </ul> <p>Seguidament accedirem a l'usuari 5 i modificarem els permisos tamb\u00e9 afegirem una comanda on pasar\u00e0 el seg\u00fcent: dd: Es crea un fitxer anomenat test amb dades de /dev/zero de 800 KiB (bs=1K count=800).  <pre><code>dd if=/dev/zero of=test bs=1K count=800\n</code></pre> - Per veure un informe detallat del disc i les seves quotes utilitzarem la seg\u00fcent comanmda: <pre><code>repquota /dev/sdc1\n</code></pre> </p> <ul> <li>Continuant amb les proves generarem un altre arxiu test per comprovar que passa si superem la cantitat d'emmagatzematge assignada.  <pre><code>s'ha execedit la quota de disc\n</code></pre></li> <li> <p>Una vegada mes podem utilitzar la comanda <code>quota -u usuari5</code> per comprovar els seg\u00fcents parametres. </p> </li> <li> <p>Per acabar tamb\u00e9 podem modificar els dies de gr\u00e0cia per defecte. <pre><code>edquota -t\n</code></pre> </p> </li> <li> <p>Per \u00faltim comprovarem de forma gr\u00e0fica que passa si superem el l\u00edmit de la quota. Per fer-ho descarregarem una foto d'internet i passa el seg\u00fcent. </p> </li> </ul>"},{"location":"P1-S2/#enllacos-dinteres-webgrafia","title":"Enlla\u00e7os d'inter\u00e9s / Webgrafia","text":"<p><pre><code>https://wiki.archlinux.org/title/Umask_(Espa%C3%B1ol)\n</code></pre> <pre><code>https://www.uv.es/diuvdocs/Jornades_Professors/03.%20DoCiencia/Documents%20DoCi%C3%A8ncia/C%C3%80NCER/Pr%C3%A0ctiques%20Bioinform%C3%A0tica_C%C3%A0ncer/Materials%20Practica%20Bioinform%C3%A0tica/Linux_UOC.pdf\n</code></pre> <pre><code>https://en.linuxadictos.com/chmod-modify-linux-permissions.html\n</code></pre> <pre><code>https://diposit.ub.edu/dspace/bitstream/2445/11723/1/Iniciaci%C3%B3%20a%20l'Administraci%C3%B3%20de%20Sistemes%20Operatius%20-%20Linux.pdf\n</code></pre> <pre><code>http://personal.biada.org/~ealonso/matin/linux/comandes_basiques.html\n</code></pre></p>"},{"location":"P1-S3/","title":"P1 S3","text":""},{"location":"P1-S3/#introduccio","title":"Introducci\u00f3","text":"<p>En aquest sprint, descriurem com configurar en un entorn Ubuntu Linux un servidor LDAP per a la gesti\u00f3 centralitzada de dominis, usuaris, grups i pol\u00edtiques de seguretat. El proc\u00e9s inclou la instal\u00b7laci\u00f3 i configuraci\u00f3 d'un servidor LDAP, la creaci\u00f3 de comptes d'usuari i la definici\u00f3 de pol\u00edtiques de seguretat.</p> <p>Instal\u00b7larem serveis essencials com servidors de fitxers, que s'integren amb LDAP per a l'autenticaci\u00f3 centralitzada. Implementarem connexions remotes segures i gestionarem permisos d'acc\u00e9s mitjan\u00e7ant LDAP.</p>"},{"location":"P1-S3/#installacio-domini-ldap","title":"Instal\u00b7laci\u00f3 domini LDAP","text":"<ul> <li> <p>Un domini LDAP (Lightweight Directory Access Protocol) \u00e9s una estructura jer\u00e0rquica que s'utilitza per gestionar i organitzar informaci\u00f3 sobre usuaris, grups, recursos i altres objectes en una xarxa. Serveix com a repositori centralitzat per a l'autenticaci\u00f3 i la gesti\u00f3 d'acc\u00e9s, permetent que m\u00faltiples sistemes i aplicacions comparteixin la mateixa informaci\u00f3 d'usuaris i permisos.</p> </li> <li> <p>Una Unitat Organitzativa (UO) \u00e9s un contenidor dins de l'estructura LDAP que s'utilitza per organitzar objectes com usuaris, grups i recursos. Les UO permeten una gesti\u00f3 m\u00e9s f\u00e0cil i l\u00f2gica dels objectes, ja que es poden agrupar segons criteris com departaments, ubicacions o funcions.</p> </li> <li> <p>Per crear un domini LDAP haurem de seguir els seg\u00fcents pasos:</p> </li> <li> <p>En primer lloc mirarem l'ip de la nostra m\u00e0quina servidor, en aquest cas la configurarem manualment i comprovarem si aquesta fa ping.  </p> </li> <li> <p>Per continuar canviarem el nom del host al nostre equip per a aix\u00f2 editarem el fitxer <code>etc/hostname</code> i farem el mateix amb el fitxer <code>etc/hosts</code> </p> </li> <li> <p>El seg\u00fcent pas ens implica si no tenim el paquet slapd, instalar-lo, un cop el tenim l'executem, aix\u00f2 si, pot ser que hi hagin problemes fent la configuraci\u00f3, jo mateix en vaig viure un, si en aquest cas tenim algun impediment o contratemps podem tornar a reconfigurar el paquet amb la seg\u00fcent comanda, i llavors ja podrem procedir amb la configuraci\u00f3. <pre><code>dpkg-reconfigure slapd\n</code></pre> </p> </li> <li> <p>Com podem veure ja sen's obre un men\u00fa de configuraci\u00f3 que haurem d'anar emplenant tal i com es mostra a continuaci\u00f3, es important que s'elimini la base de dades que hi ha previa a l'instal\u00b7laci\u00f3, simplement ens limitem a seguir els pasos que es mostren.</p> </li> </ul> <p> </p> <ul> <li> <p>B\u00e0sicament el que hem fet es assignar una contrasenya i uns noms de domini. </p> </li> <li> <p>Una vegada configurat el paquet per comprovar si ho hem fet correctament utilitzarem la comanda <code>slapcat</code></p> </li> </ul> <p></p> <ul> <li>Com es pot apreciar els valors coincideixen amb els de la configuraci\u00f3 pr\u00e8via. Per continuar ara configurarem les \"ou\", grups i usuaris tal i com es mostra, tamb\u00e9 es veur\u00e0 com aplicar els canvis al LDAP.</li> <li>Es important que als arxius es tingui en compte els noms de domini que hem configurat ja que podria ser una font d'errors. En primer lloc configurem les OU a l'arxiu <code>ou.ldif</code></li> </ul> <p></p> <ul> <li>A continuaci\u00f3 configurem els grups al fitxer <code>group.ldif</code></li> </ul> <p></p> <ul> <li>Seguidament configurem els usuaris al fitxer <code>usu.ldif</code></li> </ul> <p></p> <ul> <li>Com els fitxers anteriors no s\u00f3n per defecte, els hem fet nosaltres, ara els hem d'inserir al LDAP i afegir una nova entrada per tant els afegirem de la seg\u00fcent forma.</li> </ul> <p></p> <ul> <li>Tal i com hem vist abans per confirmar si els canvis s'han aplicat podem utilitzar la comanda <code>slapcat</code>.</li> </ul> <p></p>"},{"location":"P1-S3/#installacio-domini-ldap-amb-un-server","title":"Instal\u00b7laci\u00f3 domini LDAP amb un server","text":"<p>A l'apartat anterior hem vist com instal\u00b7lar un domini LDAP amb una maquina Ubuntu amb interficie gr\u00e0fica, en aquest cas ho instal\u00b7larem a un ubuntu server directament, un cop arribem a la configuraci\u00f3 de paquets com al pas anterior pararem, aqu\u00ed es mostraran les diferencies que hi ha al fer-ho sense interficie gr\u00e0fica.</p> <ul> <li>En primer lloc configurarem les opcions de xarxa del nostre server, s'ha de modificar un arxiu netplan en concret. All\u00e0 modificarem la nostra ip.</li> </ul> <p><pre><code>sudo nano /etc/netplan/50-cloud-init.yaml\n</code></pre> </p> <ul> <li>Un cop hem fet aquesta configuraci\u00f3 l'haurem d'aplicar i comprovar si s'ha fet correctament.</li> </ul> <p></p> <ul> <li>Ara modifiquem els arxius de hosts i hostnames del directori etc.</li> </ul> <p> </p> <ul> <li>Per \u00faltim descarregem el paquet ldap i a <code>partir d'aqui seguim els passos anteriors, ja que es el mateix!</code> <pre><code>apt install slapd ldap-utils\n</code></pre> </li> </ul>"},{"location":"P1-S3/#entorns-grafics","title":"Entorns gr\u00e0fics","text":"<ul> <li>En aquest apartat veurem com configurar un LDAP amb interficie gr\u00e0fica en aquest cas he escollit Apache Directory Studio perqu\u00e9 \u00e9s intuitiu i senzill.</li> </ul>"},{"location":"P1-S3/#apache-directory-studio","title":"Apache Directory Studio","text":"<ul> <li>En primer lloc, ens descarregem l'apliaci\u00f3 de la p\u00e0gina oficial. Despr\u00e9s l'\u00fanic que hem de fer es descomprimir el paquet i executar-lo.</li> </ul> <ul> <li>Un cop dins buscarem la connexi\u00f3 que tenim del LDAP i fem login amb les nostres credencials, llavors afegirem noves entrades, aquestes poden ser creades des de zero o amb plantilles, en aquest cas he escollit fer-ne una amb una plantilla per crear un nou usuari. Com podrem comprovar els usuaris que hem creat en els passos anteriors estan presents a la nostra estructura.</li> </ul> <ul> <li>Ara afegirem les classes del objecte que volem agregar.</li> </ul> <ul> <li>A continuaci\u00f3 escollim un cn per l'usuari.</li> </ul> <ul> <li>Per \u00faltim acabarem de configurar els atributs per a que l'usuari pugui ser utilitzat.</li> </ul> <ul> <li>Com podem veure tenim ja l'usuari creat, tot i aix\u00f2 encara fan falta definir les contrasenyes i l'interpret de comandes.</li> </ul> <ul> <li>En aquest cas he escollit la carpeta compartida de perfils per crear la home. I despr\u00e9s he donat una contrasenya i el /bin/bash per al loginshell.</li> </ul> <ul> <li>Per entrar amb el client amb l'usuari nou hem d'escollir l'opci\u00f3 de no esteu llistat i all\u00e0 posem les nostres credencials i ens crear\u00e0 la home al directori escollit, despr\u00e9s podrem entrar i comprovar que estem amb l'usuari correcte.</li> </ul>"},{"location":"P1-S3/#unir-equips-al-domini","title":"Unir equips al domini","text":"<p>En aquesta part veurem com connectar un equip client al domini que hem creat pr\u00e8viament.</p> <ul> <li> <p>El primer pas seria instal\u00b7lar el seg\u00fcent paquet al nostre equip client: <pre><code>apt install libnss-ldap libpam-ldap nscd\n</code></pre> </p> </li> <li> <p>Un cop finalitzi l'instal\u00b7laci\u00f3 del paquet sen's obrir\u00e0 una pestanya de configuraci\u00f3 similar a l'anterior que hem vist durant la configuraci\u00f3 del servidor, en aquest cas es important saber la IP de la m\u00e0quina servidor ja que ser\u00e0 el primer que configurarem tal i com es mostra a la seg\u00fcent imatge.</p> </li> </ul> <p> </p> <ul> <li>Un cop feta aquesta part seguirem amb la configuraci\u00f3 respectant els noms de domini que hem donat pr\u00e8viament tal com es mostra a continuaci\u00f3.</li> </ul> <p> </p> <ul> <li>Amb aquestos pasos ja tindrem el paquet configurat. Seguidament haurem de canviar alguns parametres del client ja que volem que detecti primer el servidor ldap, i ho farem modificant el fitxer <code>etc/nsswitch.conf</code>.</li> </ul> <p></p> <ul> <li> <p>D'aquesta forma ens assegurem que els usuaris que hi han al LDAP siguin revisats pel nostre client, per aix\u00f2 li indiquem els fitxers que ha de revisar, els d'usuari, grups i contrasenyes.</p> </li> <li> <p>A continuaci\u00f3 veurem com configurar la sessi\u00f3 dels usuaris LDAP, per a fer aix\u00f2 tamb\u00e9 necessitarem configurar el seg\u00fcent fitxer <code>etc/pam.d/common-session</code></p> </li> </ul> <p></p> <ul> <li> <p>Aquesta modificaci\u00f3 assegura que quan un usuari inicia sessi\u00f3 i no t\u00e9 un directori principal, se li crear\u00e0 autom\u00e0ticament un nou directori principal amb el contingut de <code>/etc/skel</code> i amb els permisos especificats per umask=022.</p> </li> <li> <p>A continuaci\u00f3 configurarem ajustant com es presenta la pantalla d'inici de sessi\u00f3 als usuaris, especificant la sessi\u00f3 per defecte i permetent l'acc\u00e9s manual amb el nom d'usuari.</p> </li> </ul> <p></p> <ul> <li> <p>Amb aquesta configuraci\u00f3 indiquem que el gestor de pantalla ha de mostrar una opci\u00f3 per permetre als usuaris introduir manualment el seu nom d'usuari en lloc de seleccionar-lo d'una llista. Aix\u00f2 pot ser \u00fatil en entorns on hi ha molts usuaris o quan es vol permetre l'acc\u00e9s a usuaris que no apareixen a la llista predeterminada.</p> </li> <li> <p>Seguidament farem una prova per alu1 un usuari inserit i configurat pr\u00e8viament, primerament ens assegurem de que aquest aparegui al fitxer passwd.</p> </li> </ul> <p></p> <ul> <li>Com aquest apariex reeiniciarem el sistema i a l'hora d'escollir usuari seleccionarem l'opci\u00f3 de no apareixeu llistat, llavors indicarem usuari i contrasenya. Una altra opci\u00f3 es fer-ho des del terminal, canviant d'usuari amb su alu1. La q\u00fcesti\u00f3 es poder utilitzar l'usuari alu1.</li> </ul> <p> </p>"},{"location":"P1-S3/#gestio-del-domini","title":"Gesti\u00f3 del domini","text":"<p>Per crear l\u2019esquema b\u00e0sic de l\u2019organitzaci\u00f3 i comen\u00e7ar a treballar hi ha dues opcions: fitxers ldif, i utilitzar comandes. En aquest apartat veurem les comandes que hi han tips que hi ha com ara, \"search\", \"add\", \"modify\", i \"delete\".</p> <ul> <li>Abans de comen\u00e7ar comprovarem com he, vist anteriorment que tenim el domini ben creat i despr\u00e9s veurem que a la carpeta d'escriptori hi ha uns arxius preparats amb dades d'usuaris.</li> </ul> <p> </p> <ul> <li>Com es pot veure el fitxer esta ple de dades d'usuaris que voldrem agregar, i ho farem amb un add.</li> </ul>"},{"location":"P1-S3/#ldapadd","title":"ldapadd","text":"<ul> <li>Amb la comanda <code>ldapadd</code> podrem afegir els usuaris que hem vist abans per fer-ho utilitzarem la seg\u00fcent comanda.</li> </ul> <p><pre><code>ldapadd -x -D \"cn=admin,dc=sabate,dc=cat\" -w marc -f dades.ldif\n</code></pre> </p> <ul> <li> <p>Com podem veure s'han afegit els usuaris que tenim al fitxer.</p> </li> <li> <p>Tamb\u00e9 podem crear usuaris nous creant un fitxer ldif nou, i agregant-lo com es mostra.</p> </li> </ul> <p> </p>"},{"location":"P1-S3/#ldapsearch","title":"ldapsearch","text":"<ul> <li>Com hem creat diferents usuaris ara voldrem comprovar la seva existancia i ho farem amb un <code>ldapsearch</code></li> </ul> <pre><code>ldapsearch -xLLL -b \"dc=sabate,dc=cat\"\n</code></pre> <ul> <li>Despr\u00e9s d'aix\u00f2 podem afegir diferents filtres per buscar segons uid, objectclass, email, el que ens interessi.</li> </ul>"},{"location":"P1-S3/#ldapmodify","title":"ldapmodify","text":"<ul> <li>Per modificar alguna entrada podem utilitzar un modify, podem modificar qualsevol informaci\u00f3 que vulguem en aquest cas canviarem el cognom de l'usuari que hem creat.</li> </ul> <p><pre><code>ldapmodify -x -D \"cn=admin,dc=sabate,dc=cat\" -w marc -f fitxer.ldif\n</code></pre> </p> <ul> <li>Com es pot veure l'entrada dn: del nostre usuari no es correspont amb la modificaci\u00f3 feta pr\u00e8viament, per tant, tamb\u00e9 l'haurem de modificar, i ho farem de la seg\u00fcent forma.</li> </ul> <p> </p> <ul> <li>Finalment veurem com esborrar informaci\u00f3 o b\u00e9 es pot fer a trav\u00e9s d'un ditxer ldif amb el modify o amb un <code>ldapdelete</code></li> </ul>"},{"location":"P1-S3/#ldapdelete","title":"ldapdelete","text":"<ul> <li>Finalment eliminarem l'usuari que hem creat, ja que no seguir\u00e0 entre nosaltres.</li> </ul> <p><pre><code>ldapdelete -x -D \"cn=admin,dc=sabate,dc=cat\" -w contrasenya \"cn=Reynolds,ou=users,dc=sabate,dc=cat\"\n</code></pre> </p>"},{"location":"P1-S3/#servidors-nfs","title":"Servidors NFS","text":"<p>El NFS \u00e9s un protocol que permet compartir fitxers i directoris RECURSOS a trav\u00e9s d'una xarxa. Amb NFS, un servidor pot exportar directoris i els clients poden muntar aquests directoris com si fossin locals. Aix\u00f2 \u00e9s \u00fatil en entorns on m\u00faltiples m\u00e0quines necessiten accedir als mateixos fitxers, com en entorns de treball en equip o en sistemes distribu\u00efts. En un entorn NFS, l'autenticaci\u00f3 es fa a nivell de host, no a nivell d'usuari. Aix\u00f2 vol dir que el servidor NFS confia en les m\u00e0quines clients que tenen perm\u00eds per accedir als directoris exportats. Els usuaris poden tenir un directori home centralitzat que es munta autom\u00e0ticament en qualsevol m\u00e0quina de la xarxa, gr\u00e0cies a la integraci\u00f3 de NFS i LDAP.</p>"},{"location":"P1-S3/#installacio-part-server","title":"Instal\u00b7laci\u00f3 part server","text":"<p>En aquesta part veurem con instal\u00b7lar NFS a la part del servidor, simplement obrim un terminal fem un update i un cop acabat procedim amb les seg\u00fcents comandes:</p> <pre><code>apt install nfs-kernel-server\n</code></pre> <p></p> <p>Un cop instal\u00b7lat verifiquem que s'hagi fet correctament.</p> <pre><code>systemctl status nfs-server\n</code></pre> <p></p> <p>Amb aix\u00f2 ja tindrem el paquet NFS instal\u00b7lat.</p>"},{"location":"P1-S3/#installacio-part-client-ubuntu","title":"Instal\u00b7laci\u00f3 part client Ubuntu","text":"<p>A continuaci\u00f3 veurem com instalar la part del client. Igual que amb el server primer fem un apt update i despr\u00e9s instal\u00b7lem el seg\u00fcent paquet. <pre><code>apt install nfs-common rpcbind\n</code></pre></p> <p></p> <p>Amb aquest pas ja tenim la part del client ubunutu instal\u00b7lada.</p>"},{"location":"P1-S3/#installacio-part-client-windows","title":"Instal\u00b7laci\u00f3 part client Windows","text":"<p>Per instal\u00b7lar la part del NFS a Windows ens hem de dirigir a la part del panell de control i un cop all\u00e0 buscar programes i caracteristiques, a la part esquerra podrem activar les caracteristiques i activarem les que veurem a continuaci\u00f3.</p> <p> </p>"},{"location":"P1-S3/#utilitzar-el-servidor-nfs","title":"Utilitzar el servidor NFS","text":"<ul> <li>Per comen\u00e7ar a utilitzar el servidor NFS el primer que farem ser\u00e0 crear un directori a la nostra m\u00e0quina servidor i li canviarem els permisos.</li> </ul> <ul> <li>Per poder compartir la carpeta que hem fet modificarem l'arxiu <code>/etc/exports</code> i aqu\u00ed posarem la ruta de la nostra carpeta i els seg\u00fcents parametres. *: Permet l'acces a tots els clients. rw: Permet lectura i escriptura (read-write). sync: Assegura que les operacions d'escriptura es completen abans de respondre al client. no_subtree_check: Millora el rendiment en no comprovar els subdirectoris.</li> </ul> <ul> <li>Un cop feta aquesta modificaci\u00f3 haurem de reiniciar el sevei per a que els canvi s'apliquin. Despr\u00e9s crearem un arxiu per fer proves a la carpeta compartida desde la nostra m\u00e0quina servidor.</li> </ul> <ul> <li>Ara que ja tenim la carpeta preparada entrarem desde el nostre client Windows, a l'explorador d'arxius si anem a altres ubiacacions i all\u00e0 posem l'adre\u00e7a del nostre servidor podrem connectar-nos.</li> </ul> <ul> <li>Per fer alguna prova crearem un nou arxiu de text, tamb\u00e9 veurem que el de proves es pot llegir correctament.</li> </ul> <ul> <li>Comprovarem que s'hagi efectuat tot correctament des de el propi servidor, amb la comanda ls -l per veure quins permisos tenen els fitxers.</li> </ul> <ul> <li>A continuaci\u00f3 entrarem des de el nostre client Ubuntu, aquest cop muntarem la carpeta compartida a un directori que crearem per allotjar-la, tamb\u00e9 haurem de canviar-li els permisos i ara per muntra-la hem d'utilitzar la seg\u00fcent comanda. <pre><code>mount ipservidor:/compartida /directoriclient\n</code></pre></li> </ul> <ul> <li>Seguidament, revisarem el contingut de la carpeta compartida per veure si es el mateix i despr\u00e9s crearem un fitxer nou i veurem els seus permisos.</li> </ul>"},{"location":"P1-S3/#nfs-amb-usuaris-ldap","title":"NFS amb usuaris LDAP","text":"<ul> <li>Per comen\u00e7ar, tornem a configurar la nova ruta que volem compartir amb els usuaris de ldap des de la nostra m\u00e0quina servidor. </li> </ul> <ul> <li>Un cop creada la ruta, crearem el directori amb els permisos corresponents des del servidor.</li> </ul> <ul> <li>La principal diferencia es que ara tamb\u00e9 haurem de modificar el ldap per tal de que el directori de la home dels usuaris sigui la carpeta compartida que hem fet.</li> </ul> <ul> <li>Com hem creat un usuari nou per fer aquestes proves l'hem d'afegir al ldap.</li> </ul> <ul> <li><code>IMPORTANT</code> Aquesta part es configura al <code>CLIENT</code>, la mala configuraci\u00f3 pot provocar que el sistema no arranqui. Primer crearem la carpeta amb els seus permisos pertinents.</li> </ul> <ul> <li>Ara configurarem el fitxer <code>fstab</code> es important copiar correctament aquests parametres. B\u00e0sicament el que estem fent es muntar un directori nfs. </li> </ul> <ul> <li>Per \u00faltim reiniciem el nostre client i quan ens demani les credencials d'usuari posem que no estem llistats i escrivim les credencials de l'usuari en aquest cas alu4.</li> </ul> <ul> <li>Un cop dins comprovem que l'usuari es el corresponent.</li> </ul>"},{"location":"P1-S3/#servidor-samba","title":"Servidor Samba","text":"<p>Samba \u00e9s una implementaci\u00f3 lliure del protocol SMB/CIFS, que permet compartir arxius i impressores entre sistemes Windows i Linux. Samba pot autenticar usuaris localment o mitjan\u00e7ant un servidor LDAP. Aix\u00f2 permet gestionar usuaris i permisos de manera centralitzada.</p>"},{"location":"P1-S3/#installacio-i-conf-server","title":"Instal\u00b7laci\u00f3 i conf server","text":"<ul> <li> <p>EN primer lloc com hem vist altres vegades farem un update del nostre servidor i despr\u00e9s procedirem instal\u00b7lant el paquet smb.  <pre><code>apt install samba\n</code></pre> </p> </li> <li> <p>Un cop tenim el paquet instal\u00b7lat procedirem a crear una carpeta a l'arrel i assignar-li els permisos adients.</p> </li> </ul> <p></p> <ul> <li>Per continuar, entrarem al fitxer de configuraci\u00f3 de samba <code>/etc/samba/smb.conf</code> aqu\u00ed definirem la ruta de la carpeta que volem compartir i adicionalment podrem assignar rols i permisos als usuaris i grups, en aquest cas farem uns usaris del grup colors per veure un amb tots el permisos, un amb sol permis de lectura i un sense permisos.</li> </ul> <p></p> <ul> <li>Despr\u00e9s de cada cop que fem una modificaci\u00f3 al fitxer de configuraci\u00f3 per apliacr aquestos canvis haurem de fer un reeinici del sistema, amb la comanda <code>systemctl restart smbd nmbd</code>.</li> </ul> <p></p> <ul> <li>A continuaci\u00f3, crearem els usuaris, aquest cop ho farem amb una comanda per a que aquest no iniciin sessi\u00f3, i el seu interpret de comandes sigui el /bin/bash.  <pre><code>useradd -M -s /sbin/nologin usuari\n</code></pre></li> </ul> <p></p> <ul> <li>Amb el matiex metode que creem el primer usuari crearem els altres i el grup. Com es pot apreciar l'usuari blau no est\u00e0 al grup.</li> </ul> <p></p> <ul> <li>Per comprovar que els usuaris i el grup han estat creats correctament farem un tail dels fitxers <code>/etc/group</code> i <code>/etc/passwd</code></li> </ul> <p></p> <ul> <li>Per a que aquestos usuaris pugin entrar al servidor samba els assignem una contrasenya per a aquest servei amb la comanda seg\u00fcent.  <pre><code>smbpasswd -a usuari\n</code></pre></li> </ul> <p></p> <ul> <li>Per \u00faltim canviarem alg\u00fans permisos com ara que l'usuari roig no pugui entrar, que els usuaris del grup colors puguin llegir i que balu pot llegir i escriure. Tamb\u00e9 podrem iniciar sessi\u00f3 com a convidat.</li> </ul> <p></p>"},{"location":"P1-S3/#installacio-i-proves-client","title":"Instal\u00b7laci\u00f3 i proves client","text":"<ul> <li>Per configurar la part del client, repetirem els passos anteriors, fer un update i despr\u00e9s instal\u00b7lar el paquet de samba.</li> </ul> <ul> <li>Un cop hem instal\u00b7lat el paquet obrim l'explorador d'arxius i ha altres ubicacions posarem l'adre\u00e7a del nostre server i amb que ens connectem (samba).</li> </ul> <ul> <li>Un cop ens connectem la primera pantalla que ens apareix es per entrar com a convidat o com usuari registrat. Primer farem les proves amb un usuari convidat.</li> </ul> <ul> <li><code>IMPORTANT</code> (aquesta part es al server) .Ara per assegurar-nos eliminem l'opci\u00f3 de read only ja que tamb\u00e9 volem escriure amb els usuaris. Un cop fet els canvis hem de reiniciar el sistema.</li> </ul> <ul> <li>Quan acabem amb al servidor, tornem al client i fem les proves corresponents amb els usuaris. Per aix\u00f2 ens connectarem a la carpeta compartida a trav\u00e9s de l'explorador d'arxius i a la part d'altres ubiacacions possarem l'adre\u00e7a del nostre servidor samba. I la primera opci\u00f3 ser\u00e0 entrar com convidat / anonim. Per comprovar que podem crear un directori.</li> </ul> <ul> <li>Despr\u00e9s, provarem amb el primer usuari i el que te mes permisos que \u00e9s blau. Amb el mateix metode que abans posarem les credencials de blau i crearem un directori nou.</li> </ul> <ul> <li>Per veure si els directoris que hem creat tenen els permisos corresponents als seus usuaris anem al <code>SERVER</code> i all\u00e0 dins de la carpeta que compartim amb samba i fem un ls -l.</li> </ul> <ul> <li>Com funciona adequadament procedim amb els usuaris que queden, tornem al client i entrem com roig, i com aquest no pot entrar ens retorna a la pantalla de \"login\".</li> </ul> <ul> <li>Finalment entrarem amb l'usuari groc i farem un directori, com no te permisos d'escriptura ens donar\u00e0 un error.</li> </ul>"},{"location":"P1-S3/#utilitzar-usuaris-ldap-per-autenticar-amb-samba","title":"Utilitzar usuaris ldap per autenticar amb samba","text":"<ul> <li>Aquest apartat no es pot realitzar.</li> </ul>"},{"location":"P1-S4/","title":"P1 S4","text":""},{"location":"P1-S4/#raid","title":"RAID","text":"<p>EL RAID es una eina que ens permet combinar diversos discs en una sola unitat l\u00f2gica per dona redundancia a les dades. Aix\u00ed en cas de perdua poden recuperar. Hi han diferents tipus de raids:</p> <ul> <li> <p>RAID 0: Avui en dia es considera obsolet. Consisteix en dividir les dades i distribuir-les entre discs sense redundancia. El nivell de seguretat es pr\u00e0cticament nul, ja que pots perdre les dades f\u00e0cilment. </p> </li> <li> <p>RAID 1: Funciona amb el metode \"espill\" que consisteix en fer una copia exacta de les dades en un altre disc, aix\u00f2 ens dona redundancia (es com un copia de seguretat en temps real). </p> </li> <li> <p>RAID 5: Utilitza com a minim tres discs, tot i que tamb\u00e9 es pot fer amb quatre. El sistema d'emmagatzematge reparteix l'informaci\u00f3 entre tots els discs menys a un que es l'utilitzat per la paritat, en cas de fallar un disc pots recuperar l'informaci\u00f3. </p> </li> <li> <p>RAID 6: El funcionament es exactament igual que l'anterior, la diferencia principal es que la paritat es guarda en dos discs. </p> </li> </ul>"},{"location":"P1-S4/#raid-1","title":"RAID 1","text":"<p>En aquest primer apartat veurem com configurar un RAID1. </p> <ul> <li>EN primer lloc necessitem el paquet mdadm, que es el que ens permet instal\u00b7lar i configurar els RAIDs</li> </ul> <p></p> <ul> <li> <p>Un cop el paquet esta instal\u00b7lat configurarem els discs amb la comanda que ja coneixem <code>fdisk</code> els discs que modifiquem haur\u00e0n de cumplir la seg\u00fcent configuraci\u00f3- </p> </li> <li> <p>En acabar la configuraci\u00f3 consultarem les particions i disc de la nostra m\u00e0quina i ens assegurarem de que el format tingui autodetecci\u00f3 de RAID Linux. </p> </li> <li> <p>A continuaci\u00f3 crearem una carpeta per fer proves, i li doanrem els permisos que es mostren a continuaci\u00f3. </p> </li> <li> <p>A continuaci\u00f3 donarem el format al RAID amb aquesta comanda, el que fem es basicament crear el RAID amb el nivell que es el n\u00famero de RAID i despr\u00e9s indiquem el n\u00famero de dispositius i quins son.  <pre><code>mdadm --create /dev/md0 --level=1 --raid-devices=2 /dev/sdb1 /dev/sdc1\n</code></pre> </p> </li> <li> <p>Ara donarem el format d'arxius a l'array del RAID, amb la seg\u00fcent comanda. <pre><code>mkfs.ext4 /dev/md0\n</code></pre> </p> </li> <li> <p>Per comprovar que s'ha creat tot correctament utilitzarem la comanda:  <pre><code>mdadm --detail /dev/md0\n</code></pre> </p> </li> <li> <p>Seguidament executarem les seg\u00fcents comandes per crear un fitxer de configuraci\u00f3 per al RAID. <pre><code>mdadm --detail --scan &gt; /etc/mdadm/mdadm.conf\n</code></pre> </p> </li> <li> <p>Dins del fitxer escriurem la seg\u00fcent linea <code>DEVICE /dev/sdb1 /dev/sdc1</code>.</p> </li> </ul> <p></p> <ul> <li> <p>Com ja sabem per muntar permanent el RAID haurem de consigurar el fitxer fstab  </p> </li> <li> <p>Un cop feta la configuraci\u00f3 reiniciem els serveis. Muntarem el disc i utilitzarem la seg\u00fcent comanda <code>update-initramfs -u -k all</code>.  </p> </li> <li> <p>Despr\u00e9s de fer tots els passos comprovarem que el RAID esta correctament configurat un cop es reinicia el sistema. </p> </li> <li> <p>Crearem una serie de directoris i fitxers per fer proves  </p> </li> <li> <p>A continuaci\u00f3 treurem un disc i veurem que podem seguir treballant amb les dades. Com es pot apreciar el disc que hem desmuntat es troba en estat <code>faulty</code>. <pre><code>mdadm /dev/md0 -f /dev/sdb1\n</code></pre> </p> </li> <li> <p>Un cop fet el pas anterior eliminarem el disc amb el modificador <code>-r</code> i veurem que el seu estat passar\u00e0 a ser <code>removed</code>. </p> </li> <li> <p>Igualment podrem accedir a les dades  </p> </li> <li> <p>Amb la mateixa comanda que hem utilitzat anteriorment amb el modificador <code>-a</code> afegirem de nou el disc. Com es pot apreciar primer trigarpa una estona ja que estar\u00e0 amb l'estat <code>spare rebuilding</code> passat un temps si tornem a detallar el RAID veurem que es troba en estat actiu.  </p> </li> <li> <p>Seguidament simularem un cas en el que un dels discs es trenca o te algun problema i es substituit per un de nou. Un cop hem extret el disc si fem un detail del RAID veurem que sol ens apareix un. </p> </li> <li> <p>Per continuar aturarem tots els serveis i reinicaiarem el RAID toranant-lo a muntar. Veurem que les dades segueixen estant segures. I amb un detail veurem l'estat del RAID.  </p> </li> <li> <p>Per acabar afegirem el nou disc a la m\u00e0quina i seguint la configuraci\u00f3 del principi el muntarem i prepararem. Tal i com ha passat abans amb el disc que hem desmuntat, quan posem un disc nou l'estat al RAID passa a ser <code>spare rebuilding</code>, un cop acaba, veiem que passa a actiu i que les dades segueixen all\u00e0.  </p> </li> <li> <p>Finalment, esborrarem el RAID de forma definitiva. Es important tindre amb compte que l'estat del superblock es permanent. Llavors haurem de seguir les comandes seg\u00fcents: <pre><code>umount /dev/md0\n</code></pre> <pre><code>mdadm --stop /dev/md0\n</code></pre> <pre><code>mdadm --remove /dev/md0\n</code></pre> <pre><code>rm -r /mnt/raid1\n</code></pre> </p> </li> <li> <p>Un cop hem parat els sistemes hem de eliminar les linies que hem creat al arxiu <code>fstab</code> i al <code>mdmda.conf</code>.  </p> </li> <li> <p>Com ja he esmentat abans, sino eliminem del tot el superblock la RAID seguir\u00e0 sense esborrar-se. Per tant les seg\u00fcents comandes son molt importants. Un cop executades podem fer un reinici del servei i del sistema. <pre><code>mdadm --zero-superblock /dev/sdb1 /dev/sdc1\n</code></pre> <pre><code>systemctl daemon-reload\n</code></pre> </p> </li> </ul>"},{"location":"P1-S4/#raid-5","title":"RAID 5","text":"<ul> <li> <p>En primer lloc, per fer una confiuraci\u00f3 del RAID 5, necessitarem com a minim dos discs que en un RAID 1, per tant es moment d'afegir els discs.  </p> </li> <li> <p>Com anteriorment ja hem vist com configurar els discs per muntar-los, ho farem igual per als quatre discs. </p> </li> <li> <p>Amb la comanda <code>fdisk -l</code> comprovarem que tot estigui correctament.  </p> </li> <li> <p>Seugint els pasos igual que abans ara crearem la carpeta del RAID, el RAID, l'arxiu de configuraci\u00f3 i finalment muntarem la carpeta. Per ara son els mateixos procediments que amb el RAID 1. la diferencia principal es a la comanda: <pre><code>mdadm --create /dev/md0 --level=5 --raid-devices=5 /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1\n</code></pre> </p> </li> <li> <p>Un cop establerta la configuraci\u00f3 el que farem ser\u00e0 reiniciar el sistema i comprovar l'estat del RAID amb la comanda detail. </p> </li> <li> <p>Per fer proves crearem un fitxer i un directori tal com hem fet abans. </p> </li> <li> <p>La primera prova igual que l'anterior ser\u00e0 desactivar un dels discs i comprovar el funcionament.  </p> </li> <li> <p>Com s'aprecia la informaci\u00f3 es pot consultar igualment. Tamb\u00e9 podem veure que el comportament dels discs es igual amb tots els RAID per tant la diferencia radica en quants discs necessita el RAID per funcionar i per aix\u00f2 descativarem i borrarem els discs fins veure que la informaci\u00f3 no sigui visible.</p> </li> </ul> <p><code>El propi sistema ja ens avisa de que amb dos discs fora no podr\u00e0 treballar</code> </p> <ul> <li> <p>Per tant el que farem ser\u00e0 treure el disc \"manualment\".  </p> </li> <li> <p>Com podem veure l'estat passa a ser inactiu. En aquesta situaci\u00f3 el que haurem de fer es col\u00b7locar un disc nou primer, formatar-lo i despr\u00e9s recuperar el desactivat. Aquest es el cas m\u00e9s extrany i mes complicat. Sino tot es molt paregut o igual al RAID1. </p> </li> <li> <p>Com en aquest cas sol tenim 2 disc funcionant actualment l'array no arranca i ens donar\u00e0 problemes, si tenim el disc nou preparat i amb el format que tenia l'anterior el que farem ser\u00e0 obligar a l'array a reconstruir-se amb la seguent comanda: <pre><code>mdadm --assamble --force /dev/md0 /dev/sdb1 /dev/sdc1 /dev/sdd1 /dev/sde1\n</code></pre> </p> </li> <li> <p>Un cop arrancat l'array comprovem quin es el seu estat i com podem veure ja funciona pero ens segueix fallant un dels discs que hem eliminat, el sdc. Ara no hi ha cap problema ja que el RAID funciona ara sol hem de muntar la part que ens falta.</p> </li> </ul> <p> </p> <ul> <li> <p>Com b\u00e9 sabem, tornem a afegir el disc que ens falta, el c, al RAID. Despr\u00e9s comprovarem l'estat del RAID i de les dades.  </p> </li> <li> <p><code>En conclusi\u00f3 els errors son pareguts entre el RAID1 i RAID5. I si mai tenim el problema de que l'array no inicia la comanda clau un cop tenim els discs amb el seu format es:</code> <pre><code>mdadm --assamble --force /dev/md0\n</code></pre></p> </li> <li> <p>Per acabar desmuntarem el RAID5 com hem fet abans, seguint els passos de la captura. <code>I reiniciant el sistema</code>.  </p> </li> </ul>"},{"location":"P1-S4/#enllacos-dinteres-webgrafia","title":"Enlla\u00e7os d'inter\u00e9s / Webgrafia","text":"<pre><code>https://daniellop.com/que-es-raid-5/\n</code></pre>"},{"location":"P1-S5/","title":"P1 S5","text":""},{"location":"P1-S5/#introduccio","title":"Introducci\u00f3","text":"<p>En aquest sprint veurem com funciona la monitoritzaci\u00f3 tant de Logs del sistema, ja sigui de forma remota o local; i tamb\u00e9 com funcionen les eines d'Ubuntu per monitortizar el rendiment de la nostra m\u00e0quina. A m\u00e9s a m\u00e9s, descriurem com fer que un dispositiu ens serveixi per fer de servidor d'actualitzacions. I per \u00faltim utilitzarem l'eina Lynis per simular una auditoria.</p>"},{"location":"P1-S5/#monitoritzacio","title":"Monitoritzaci\u00f3","text":""},{"location":"P1-S5/#logs","title":"LOGS","text":"<p>Els LOGS son una serie de registres que emmagatzemen informaci\u00f3 de tot el sistema, s\u00f3n una font de registres de totes les parts del sistema i recopilen tot tipus d'informaci\u00f3 que ens pot ser rellevant, per aix\u00f2 ens interessa monitoritzar-los. Poden haver logs del sistema i logs d'aplicacions .</p> <ul> <li> <p>La majoria d'aquestos LOGS es troben al directori <code>/var/log</code>. Com podem apreciar hi ha logs de tot tipus. </p> </li> <li> <p>Un de les coses que podem fer amb aquestos LOGS es actualitzar la seva rotaci\u00f3 ja que tampoc ens interessa que estiguin vagant pel sistema eternament, aixi que configurarem el fitxer <code>/etc/logrotate.conf</code> per assignar-los un tipus de rotaci\u00f3, per exemple setmanalment. </p> </li> <li> <p>Dins del direcotri <code>/etc/logrotate.d</code> podem configurar alguna rotaci\u00f3 de logs en concret. LOG2</p> </li> <li> <p>Per provar com configurar la rotaci\u00f3 d'un log en concret escollirem els logs de dpkg en aquest cas. lA configuraci\u00f3 ens mostra que els arxius rotaran cada mes que d'aquests es conservaran els \u00faltims 12 arxius de logs antics abans d'eliminar-los, que els antics es comprimir\u00e0n, i que la compressi\u00f3 es far\u00e0 despr\u00e9s de la rotaci\u00f3. Finalment es donaran els permisos. </p> </li> <li> <p>Ara veurem els logs del sistema al fitxer <code>/etc/rsyslog.d/50-defaul.conf</code>, en aquest fitxer podem configurar quins logs es mostren i quins no al fitxer al qual estan assignats. <code>Despr\u00e9s de modificar-lo s'ha de reiniciar el servei</code>. </p> </li> <li> <p>Per fer una prova enviarem una alerta al servei de mail i despr\u00e9s farem un cat al arxiu on es guarden els logs del mail per veure si ha registrat l'alerta. </p> </li> <li> <p>Ara, el que volem es que TOTES les alertes de nivell critic quedin registrades a una nova carpeta, on podrem analitzar tots els logs d'alerta critica. Com hem dit abans si modifiquem aquest arxiu s'ha de reiniciar el sistema.  </p> </li> <li> <p>A continuaci\u00f3, per comprovar que els canvis funcionen crearem una alerta critica anomenada Bomba, i llavors consultarem la carpeta dels logs que hem creat per comprovar si realment apareix la bomba. </p> </li> </ul>"},{"location":"P1-S5/#-journal","title":"- Journal","text":"<p>El journal consulta el fitxer systemd journal, que unifica logs de diferents serveis i components del sistema en un sol lloc. En canvi el cat sol ens mostra informaci\u00f3 d'un sol fitxer, el que estem consultant.</p> <ul> <li>En aquest cas farem la consulta <code>journalctl -p crit</code>, el -p filtra els registres i el crit els que son critics. El resultat ens mostra errors del RAID, un error d'autenticaci\u00f3 que em va passar per equivocar-me amb la contrasenya tres cops, i despr\u00e9s la BOMBA i les alertes que hem generat. </li> </ul>"},{"location":"P1-S5/#-logs-en-xarxa","title":"- LOGS en xarxa","text":""},{"location":"P1-S5/#-receptor","title":"-Receptor","text":"<ul> <li> <p>El primer pass es configurar el dispositiu que rebr\u00e0 els logs. Instal\u00b7lant el seg\u00fcent paquet i modificant l'arxiu <code>/etc/rsyslog.conf</code> seguint els passos que es mostrar\u00e0n que s\u00f3n treure el comentari de <code>module</code> i <code>input</code>.  <pre><code>sudo apt install rsyslog\n</code></pre> </p> </li> <li> <p>Un cop desada la configuraci\u00f3 farem un reinici del servei rsyslog i obrirem els ports per a que el tallafocs ens permeti la connexi\u00f3. </p> </li> </ul>"},{"location":"P1-S5/#-emissor","title":"-Emissor","text":"<ul> <li> <p>El seg\u00fcent pas es configurar el dispositiu que rebr\u00e0 els LOGS. Torenem a instal\u00b7lar el paquet <code>rsyslog</code> i configurarem el fitxer <code>/etc/rsyslog.conf</code>. El m\u00e9s important es posar l'ip correctament </p> </li> <li> <p>En acabar la configuraci\u00f3 de l'arxiu a la m\u00e0quina <code>receptor</code> utilitzarem la comanda tail -f/var/log/syslog. </p> </li> <li> <p>Ara ens situem a <code>l'emissor</code> on farem un intent fallit de connexi\u00f3 com a root per generar un log. </p> </li> <li> <p>Finalment desde la m\u00e0quina <code>receptor</code> veurem que ens arriba un registre amb l'ip de l'altra m\u00e0quina. </p> </li> </ul>"},{"location":"P1-S5/#-rendiment","title":"- Rendiment","text":"<p>Per visualitzar el rendiment podem utilitzar una eina propia d'Ubuntu, el monitor del sistema.  </p> <ul> <li> <p>En aquest monitor podem llistar els processos, recursos i arxius del sistema.  </p> </li> <li> <p>A continuaci\u00f3 executarem un proc\u00e9s per veure els recursos que consumeix, la prioritat i l'usuari que l'executa. Aix\u00f2 ens pot servir per detectar alguns processos que tinguin molt consum o b\u00e9 que siguin d'un usuari que no hauria d'executar-los. </p> </li> <li> <p>Aqu\u00ed podem veure altres processos ordenats per us de la cpu amb %. </p> </li> <li> <p>Per acabar tamb\u00e9 podem veure el consum de recursos de forma gr\u00e0fica. </p> </li> </ul>"},{"location":"P1-S5/#servidor-actualitzacions","title":"Servidor actualitzacions","text":"<p>Un servidor d'actualitzacions es un servidor al qual diversos equips clients est\u00e0n connectats i agafen els paquets d'actualitzacions d'aquesta m\u00e0quina servidor, aix\u00ed no col\u00b7lapsem els serveis si molts clients es volen descarregar un paquet a la vegada. Per comprovar el funcionament d'aquesta metodologia utlitzarem l'eina apache.</p>"},{"location":"P1-S5/#-servidor","title":"- Servidor","text":"<ul> <li> <p>En primer lloc, instal\u00b7larem el paquet apache. </p> </li> <li> <p>Segudiament, instal\u00b7larem el paquet mirror, que ser\u00e0 el que ens permetr\u00e0 copiar qualsevol cosa que tinguem en un directori a un altre, com si fos un mirall. </p> </li> <li> <p>A continuaci\u00f3, al fitxer <code>/etc/apt/mirror.list</code> configurarem el paquet d'instal\u00b7laci\u00f3 de google chrome.  </p> </li> <li> <p>Un cop tenim aquest fitxer modificat executarem l'apt-mirror  </p> </li> <li> <p>Despr\u00e9s, ens assegurarem que a la carpeta del mirror hi hagi el paquet d'instal\u00b7laci\u00f3 del chrome de la seg\u00fcent manera: </p> </li> </ul> <p>Si hem seguit tots aquests passos la part de configurar el servidor ja ha finalitzat, ara procedirem a la configuraci\u00f3 del client per poder accedir al instal\u00b7lador del chrome del client al servidor.</p>"},{"location":"P1-S5/#-client","title":"- Client","text":"<ul> <li> <p>El primer pas \u00e9s afegir la clau GPG de Google al sistema. Aquesta clau s'utilitza per verificar la integritat i autenticitat dels paquets descarregats des dels repositoris de Google, en aquest cas Chrome. </p> </li> <li> <p>A m\u00e9s a m\u00e9s, al fitxer <code>ubuntu.sources</code> afegirem la ruta del paquet del chrome, per\u00f2, amb la IP del nostre servidor. </p> </li> <li> <p>Seguidament, modificarem l'arxiu <code>/etc/apt/sources.list.d/ubuntu.sources</code> que aqu\u00ed tamb\u00e9 li indicarem que els paquets que volem que instal\u00b7li tinguin la ruta del nostre servidor, aix\u00ed ens assegurem de que els extreu del servidor.  </p> </li> <li> <p>Finalment, llan\u00e7arem un update al client per veure si realment utilitza les rutes que apunten al servidor, i ens fixarem si els paquets contenen la IP d'aquest.  </p> </li> <li> <p>Per acabar, veurem que si que agafa els paquets del servidor, sol ens quedaria verificar que s'ha instal\u00b7lat el chrome correctament. </p> </li> </ul>"},{"location":"P1-S5/#auditoria","title":"Auditoria","text":""},{"location":"P1-S5/#-lynis","title":"- Lynis","text":"<ul> <li>El primer pas que hem dur a terme es fer un update, un cop acabat instal\u00b7larem el Lynis <pre><code>sudo apt install lynis -y\n</code></pre> </li> <li>Un cop tenim el paquet instal\u00b7lat executarem el programa per fer un escaneig al sistema. <pre><code>lynis audit system\n</code></pre> </li> <li> <p>Un cop executada aquesta comanda el programa comen\u00e7ar\u00e0 un escaneig de tot el sistema i els seus apartats, per cada part ens detallar\u00e0 l'estat si esta correcte, no trobat, o amb algun error. I per \u00faltim ens mostrar\u00e0 un resum amb els detalls del que ha escanejat.  </p> </li> <li> <p>En cas de voler fer un escaneig r\u00e0pid podem utilitzar la seg\u00fcent comanda. El resultat es similar a l'anterior. <pre><code>lynis -Q\n</code></pre> </p> </li> <li> <p>Als dos escaneigos que hem realitzat ens trobarem que hi ha un apartat de sugerencies per millorar la seguretat del nostre dispositiu, i com podrem veure al resum detallat, ens diu el nivell de \"hardening index\" que vindria a ser un \u00edndex de nivell de seguretat.  </p> </li> <li> <p>Per millorar aquest index, podem comen\u00e7ar instal\u00b7lant i seguint els passos de les propostes, l'\u00fanic porblema es que el paquet <code>listbugs</code> ha quedat obsolet i ara es diu <code>listchanges</code>. A continuaci\u00f3 mostrar\u00e9 com instal\u00b7lo diversos paquets i el resultat de la millora del \u00edndex.</p> </li> </ul> <p> </p>"},{"location":"P2-S1/","title":"P2 S1","text":""},{"location":"P2-S1/#introduccio","title":"Introducci\u00f3","text":"<p>En aquest projecte veurem la funcionalitat del sistema operatiu Windows, el seu tipus de llic\u00e8ncies i tamb\u00e9 identificarem els seus elements funcionals. Realitzarem la seva instal\u00b7laci\u00f3 i configuraci\u00f3, i mostrarem com configurar els serveis de xarxa i els seus protocols mitjan\u00e7ant m\u00e0quines virtuals.</p>"},{"location":"P2-S1/#installacio-windows-server","title":"Instal\u00b7laci\u00f3 Windows Server","text":"<ul> <li> <p>Per instal\u00b7lar un Windows Server en una m\u00e0quina virtual, el primer que necessitarem ser\u00e0 una ISO del sistema operatiu. Despr\u00e9s comen\u00e7arem amb una instal\u00b7laci\u00f3 creant una m\u00e0quina nova amb VirtualBox. </p> </li> <li> <p>Els primers passos despr\u00e9s d'afegir la ISO del sistema s\u00f3n donar les capacitats de la m\u00e0quina de VirtualBox, tant la mem\u00f2ria RAM com el n\u00famero de nuclis que utilitzar\u00e0 el processador i la mem\u00f2ria f\u00edsica que tindr\u00e0 la nostra m\u00e0quina, tal com es mostra a continuaci\u00f3.</p> </li> </ul> <p> </p> <ul> <li>Un cop confirmada la configuraci\u00f3, arrenquem la m\u00e0quina i comencem la instal\u00b7laci\u00f3 del sistema, seguint els passos que es mostren.</li> </ul> <p> </p> <ul> <li> <p>En aquest punt ens demanar\u00e0 quina versi\u00f3 del sistema volem instal\u00b7lar. Escollirem la que ens facilita una interf\u00edcie gr\u00e0fica. I despr\u00e9s acceptarem els termes de la llic\u00e8ncia.  </p> </li> <li> <p>Seguidament escollirem el tipus d'instal\u00b7laci\u00f3 personalitzada, per escollir les mides del disc de forma manual, en aquest cas volem que el sistema ocupi el 100% del disc.  </p> </li> <li> <p>Finalment veurem que ja se'ns comen\u00e7a a instal\u00b7lar i simplement hem d'esperar. </p> </li> <li> <p>Un cop acabat esborrem la imatge ISO de la instal\u00b7laci\u00f3 i arrenquem la m\u00e0quina de nou. A continuaci\u00f3 haurem de configurar l'usuari administrador.</p> </li> </ul> <p> </p>"},{"location":"P2-S1/#-configuracio-ip-estatica","title":"- Configuraci\u00f3 IP est\u00e0tica","text":"<ul> <li> <p>En aquest punt configurarem una IP est\u00e0tica, ja que ens interessa que el servidor sempre tingui la mateixa IP. Els passos a seguir s\u00f3n els seg\u00fcents: Entrar a la configuraci\u00f3 de xarxa, Ethernet, opcions de l'adaptador, propietats de l'adaptador i a funcions de xarxa escollim IPv4. Un cop fet aix\u00f2 escollim la IP, la m\u00e0scara i la porta d'enlla\u00e7.  </p> </li> <li> <p>Un cop tot configurat des del terminal o CMD comprovem que la IP sigui la configurada amb la comanda <code>ipconfig</code>. </p> </li> </ul>"},{"location":"P2-S1/#installacio-windows-10","title":"Instal\u00b7laci\u00f3 Windows 10","text":"<ul> <li>Com hem fet a l'apartat anterior seleccionarem la imatge ISO del sistema operatiu Windows 10, i un cop fet aix\u00f2 donarem els par\u00e0metres de la m\u00e0quina virtual, tant de RAM com d'espai i nuclis.</li> </ul> <ul> <li>Un cop tenim feta la configuraci\u00f3 de la m\u00e0quina l'arrenquem i s'iniciar\u00e0 l'instal\u00b7lador de Windows, seguirem els passos que hem vist en l'apartat anterior, ja que la instal\u00b7laci\u00f3 \u00e9s molt similar.</li> </ul> <ul> <li>Un cop acabada la instal\u00b7laci\u00f3 esborrarem la imatge ISO d'instal\u00b7laci\u00f3. I arrenquem la m\u00e0quina de nou. Ara ens demanar\u00e0 configurar l'usuari i una serie de funcionalitats de Windows, aquestes es poden escollir al nostre gust, jo en aquest cas les he rebutjat totes. Despr\u00e9s ja podrem accedir amb normalitat.</li> </ul>"},{"location":"P2-S1/#-dual-windows-ubuntu","title":"- Dual Windows + Ubuntu","text":"<p>El seg\u00fcent pas ser\u00e0 crear una partici\u00f3 apta per instal\u00b7lar un sistema operatiu ubuntu per fer una arrencada DUAL. El primer pas ser\u00e0 configurar la partici\u00f3 del nostre disc utilitzant l'eina del propi Windows el <code>Disc Manager</code>.</p> <p></p> <ul> <li> <p>Un cop som dins de l'aplicaci\u00f3 el que farem ser\u00e0 reduir l'espai del disc per generar una partici\u00f3 on poder instal\u00b7lar l'ubuntu, escollirem mes o menys la meitat del disc o unes 20 GB per a que el sistema tingui espai de sobra. Com podrem observar ens queda una partici\u00f3 buida no assignada.  </p> </li> <li> <p>A continuaci\u00f3 li donarem format a la partici\u00f3 que hem creat tal i com es mostra. El sistema de fitxers escollit es el NTFS, Linux es capa\u00e7 de llegir aquest sistema de fitxers i ens far\u00e0 l'instal\u00b7laci\u00f3 mes senzilla.</p> </li> </ul> <p> </p> <ul> <li>Un cop tenim tot preparat amb el virtualbox afegim la imatge ISO d'Ubuntu, es important esborrar la part que posa que hi ha una unitat optica buida, sino l'instal\u00b7lador no arrencar\u00e0.</li> </ul> <p> </p> <ul> <li>Escollirem l'opci\u00f3 d'instal\u00b7lar ubuntu i comen\u00e7arem amb una configuraci\u00f3 estandar com ja hem vist en projectes anteriors.</li> </ul> <p> </p> <ul> <li>En aquest cas i com linux pot reconeixer el windows tenim l'opci\u00f3 d'instl\u00b7lar ubuntu conjuntament amb el windows, i escollirem aquesta opci\u00f3 si no hem deixat un espai preparat. En aquest cas he esobrrat la partici\u00f3 que he fet i amb aquesta opci\u00f3 pots seleccionar les GB que vols que ocupi Ubuntu i el propi sistema ho fa, aix\u00ed no fa falta modificar el disc.</li> </ul> <p> </p> <ul> <li>Despr\u00e9s podem seguir amb la instal\u00b7laci\u00f3.</li> </ul> <p> </p> <ul> <li>Un cop ja s'ha acabat la instal\u00b7laci\u00f3 reiniciem el sistma i escollim ubuntu per comprovar si arrenca b\u00e9.</li> </ul> <p> </p> <ul> <li>Com podem veure Ubuntu arrenca i funciona correctament. A continuaci\u00f3 per simular un problema amb el gestor d'arranc amb l'eina Gparted eliminarem la partici\u00f3 d'Ubuntu perque aix\u00ed tamb\u00e9 eliminarem el grub, i perdrem el gestor d'arrancada.</li> </ul> <p> </p> <ul> <li> <p>Al acabar reiniciem el sistema i ens trobarem el seg\u00fcent error. </p> </li> <li> <p>Per solucionar aquest problema podem utilitzar l'eina de la ISO de windows de reparar sistema, per tant agregem la imatge i seguim els seg\u00fcents passos per arribar al terminal de comandes.</p> </li> </ul> <p> </p> <ul> <li>Escollim l'opci\u00f3 de simbolo del sistema i a partir d'aqu\u00ed executarem les seg\u00fcents comandes per activar el gestor d'arranc de windows. <pre><code>diskpart\n</code></pre> <pre><code>list disk\n</code></pre> <pre><code>select disk n\u00ba\n</code></pre> <pre><code>list partition\n</code></pre> <pre><code>select partiton n\u00ba\n</code></pre> <pre><code>active\n</code></pre> <pre><code>exit\n</code></pre></li> <li> <p>I despr\u00e9s <pre><code>bootrec /fixmbr\n</code></pre> <pre><code>bootrec /fixboot\n</code></pre> <pre><code>bootrec /rebuildbcd\n</code></pre> <pre><code>exit\n</code></pre> </p> </li> <li> <p>Un cop fet aix\u00f2 reiniciem el sistema i ja podrem utilitzar Windows amb normalitat, per comprovar els canvis i l'estat dels disc he obert el gestor de discs, la part d'Ubuntu s'ha quedat esborrada per\u00f2 podriem recuperar l'espai. </p> </li> </ul>"},{"location":"P2-S1/#punts-de-restauracio-i-aplicacions","title":"Punts de restauraci\u00f3 i aplicacions","text":""},{"location":"P2-S1/#-punts-de-restauracio","title":"- Punts de restauraci\u00f3","text":"<p>Per crear punts de restauraci\u00f3 Windows disposa d'una eina gr\u00e0fica que ens permet guardar l'estat d'un disc en el moment en que es realitza. Primerament, obrirem aquesta eina i a la configuraci\u00f3 activarem la protecci\u00f3 del sistema tal com es mostra.  </p> <ul> <li>Un cop fet aix\u00f2 veurem que ja s'ha quedat activada la protecci\u00f3 del disc C, i podrem seguir creant el punt de restauraci\u00f3, amb l'opci\u00f3 <code>crear</code>.</li> </ul> <p> </p> <p>Ara ja tenim el punt de restaurci\u00f3 creat i per tal de comprovar el seu funcionament instal\u00b7larem alguna aplicaci\u00f3 per fer canvis al disc.</p>"},{"location":"P2-S1/#-aplicacions-comprovacio-de-la-restauracio","title":"- Aplicacions + comprovaci\u00f3 de la restauraci\u00f3","text":"<ul> <li>En primer lloc ens descarregarem l'instal\u00b7lador de qualsevol aplicaci\u00f3, en aquest cas he escollit el Firefox. Un cop descarregat amb doble clic executarem l'instal\u00b7lador i el sistema ens mostrar\u00e0 un missatge de confirmaci\u00f3.</li> </ul> <ul> <li>Seguidament al panell de control a la part de \"programas y caracteristicas\" podem consultar tots els programes i aplicacions que hi ha instal\u00b7lats al nostre sistema. Com es pot veure el Firefox esta instal\u00b7lat.</li> </ul> <ul> <li>Finalment, recuperarem l'estat anterior del sistema a partir del punt de restauraci\u00f3 que s'ha fet pr\u00e8viament. Per fer aix\u00f2 tornarem a la configuraci\u00f3 dels punts de restauraci\u00f3 i anirem a l'apartat de \"restaurar sistema\", all\u00e0 se'ns obrir\u00e0 una nova finestra on escollirem el punt de restauraci\u00f3, si el seleccionem i continuem, comen\u00e7ara la restauraci\u00f3.</li> </ul> <ul> <li>Una vegada s'ha reiniciat l'equip es mostrar\u00e0 un missatge de que la restauraci\u00f3 ha sigut completada i llavors mirarem si el Firefox ja no hi es.</li> </ul>"},{"location":"P2-S1/#llicencies-de-windows","title":"Llic\u00e8ncies de Windows","text":"<p>Per accedir a un servidor de Windows hi ha un tipus de llic\u00e8ncia anomenada <code>CAL</code>. Aquesta \u00e9s una llic\u00e8ncia que utilitzen o b\u00e9 els usuaris o b\u00e9 els dispositius per connectar-se a un servidor de Windows. Aix\u00f2 \u00e9s degut al fet que la llic\u00e8ncia de Windows d'un servidor nom\u00e9s \u00e9s \u00fatil per a un servidor, per tant si ens volem connectar amb diferents usuaris i/o dispositius necessitarem una llic\u00e8ncia del tipus CAL.</p> <p>Com ja s'ha esmentat abans per al propi servidor necessites una llic\u00e8ncia, per\u00f2 tamb\u00e9 necessitarem per a cada dispositiu una llic\u00e8ncia d'aquest mateix, per tant podem dir que per configurar un servidor necessitem la llic\u00e8ncia pr\u00f2pia d'un servidor, les llic\u00e8ncies pr\u00f2pies dels dispositius que es volen connectar i per \u00faltim les llic\u00e8ncies CAL perqu\u00e8 aquests dispositius es connectin al servidor.</p>"},{"location":"P2-S1/#-tipus-de-cal","title":"- Tipus de CAL","text":"<p>Hi ha dos tipus de llic\u00e8ncia CAL, aquestes s\u00f3n a nivell d'usuari i a nivell de dispositiu.</p> <ul> <li> <p>La llic\u00e8ncia de dispositiu pot ser \u00fatil si tenim en una sola m\u00e0quina diversos usuaris i tots requereixen d'un acc\u00e9s al servidor.</p> </li> <li> <p>La llic\u00e8ncia d'usuari pot ser \u00fatil en cas que un usuari es pugui connectar al servidor mitjan\u00e7ant diversos dispositius.</p> </li> </ul> <p>En definitiva, escollir el tipus de CAL es fa en funci\u00f3 de la necessitat de l'empresa en q\u00fcesti\u00f3.</p>"},{"location":"P2-S1/#-tipus-de-llicencies","title":"- Tipus de llic\u00e8ncies","text":"<p>Per cada versi\u00f3 del sistema operatiu tenim diferents tipus de llicencies:</p> <ul> <li> <p>Home. Aquesta com el seu nom indica es per us domestic per tant no es pot unir a un domini ni permet connexions d'escriptori remot. No es recomana per un \u00fas que no sigui el domestic.</p> </li> <li> <p>Pro. Aquesta llic\u00e8ncia si permet unirse a un domini i permet la connexi\u00f3 remota, ja que es dedicada al sector professional, aquesta si que es recomanable per petites empreses. </p> </li> <li> <p>Enterprise. Aquesta llic\u00e8ncia les funcionalitats de la versi\u00f3 pro pero ampliades ja que esta pensat per una infraestructura de gran empresa, aquesta compta amb m\u00e9s funcions de seguretat i gesti\u00f3 avan\u00e7ada. Esta pensada per grans volums de dispositius i usuaris.</p> </li> </ul> <p>Tamb\u00e9 cal afegir, que hi han llicencies com la d'education, la retail i la OEM, per\u00f2 aquestes no ens s\u00f3n molt interessants per als temes que estem tractant, simplement remarcar que hi han m\u00e9s tipus.</p>"},{"location":"P2-S1/#-enllacos-dinformacio-de-les-llicencies","title":"- Enlla\u00e7os d'informaci\u00f3 de les llic\u00e8ncies","text":"<p><pre><code>https://vasyco.com/blog/tipos-licencias-windows/\n</code></pre> <pre><code>https://www.microsoft.com/es-es/licensing/product-licensing/windows\n</code></pre></p>"},{"location":"P2-S2/","title":"P2 S2","text":"<p>En aquest segon sprint veurem com gestionar i configurar usuaris i grups, establint els permisos i accessos adequats per a cada situaci\u00f3. Tamb\u00e9 administrarem el sistema d'emmagatzematge i veurem com automatitzar algunes tasques a l'hora d'iniciar sessi\u00f3 amb els diferents usuaris.</p>"},{"location":"P2-S2/#quotes-i-usuaris","title":"Quotes i usuaris","text":"<p>En primer lloc, afegirem un disc nou a la nostra m\u00e0quina per fer proves. Com ja hem vist altres vegades, a la pestanya d'emmagatzematge afegirem un disc nou. Despr\u00e9s, arrancarem el sistema de gestor de discs de Windows i configurarem dues particions: una amb el format NTFS que es dir\u00e0 \"Dades\" i l'altra amb FAT32 que es dir\u00e0 \"Portable\".</p> <p> </p> <ul> <li>Finalment, per comprovar si hem creat correctament aquestes particions des del terminal de comandes <code>CMD</code>, executarem la comanda <code>diskpart</code> i podrem llistar els discs i els volums per comprovar el seu format i mida.</li> </ul> <p></p>"},{"location":"P2-S2/#-quotes","title":"- Quotes","text":"<p>Per continuar, anirem a l'explorador d'arxius i all\u00e0, amb el bot\u00f3 dret damunt del disc D que hem anomenat \"Dades\", obrirem les propietats i, a la pestanya \"Quota\", obrirem la configuraci\u00f3 avan\u00e7ada.</p> <p></p> <ul> <li>Seguidament, a la configuraci\u00f3 habilitarem l'administraci\u00f3 de quotes i limitarem l'espai del disc a 300 MB i un av\u00eds a 290 MB. Tamb\u00e9, si volgu\u00e9ssim, podr\u00edem denegar que l'usuari pogu\u00e9s superar aquest l\u00edmit. I, per \u00faltim, activarem les opcions de registre. Un cop activada la configuraci\u00f3, ens sortir\u00e0 la llum del sem\u00e0for en verd i un missatge del seu estat.</li> </ul> <p> </p>"},{"location":"P2-S2/#-usuaris","title":"- Usuaris","text":"<p>A continuaci\u00f3, i despr\u00e9s de configurar la quota, procedirem a la creaci\u00f3 dels usuaris. Per a aix\u00f2, obrirem l'aplicaci\u00f3 \"cuentas de usuario\" i, a les opcions avan\u00e7ades, configurarem la creaci\u00f3 d'aquests.</p> <p></p> <ul> <li>A m\u00e9s a m\u00e9s, veurem que se'ns obre l'aplicaci\u00f3 <code>lusrmgr</code>, on podem configurar els usuaris i grups del sistema local. Per tant, escollim la carpeta dels usuaris i, amb el bot\u00f3 dret, afegim un usuari nou. Com que volem crear dos alumnes, afegirem tant l'alumne 1 com el 2, tal com es mostra.</li> </ul> <p> </p> <ul> <li>Tant bon punt acabem la creaci\u00f3 d'aquests usuaris, veurem que ja disposem d'ells per fer les proves.</li> </ul> <p></p> <ul> <li>Finalment, a la secci\u00f3 de grups, afegirem un grup nou tal com hem fet amb els usuaris i en crearem un que es digui \"Limitats\", que el formaran els dos alumnes creats anteriorment, afegint-los amb l'opci\u00f3 de \"Agregar\".</li> </ul> <p> </p> <ul> <li>Per acabar, comprovarem que puguem iniciar sessi\u00f3 amb els dos i que ens apareguin per poder fer-ho.</li> </ul> <p> </p> <ul> <li>Com a prova, amb l'alumne 1 excedirem la mida que poden utilitzar del disc D. L'av\u00eds que ens dona \u00e9s que ha excedit el l\u00edmit. Ens ha deixat sobrepassar-lo ja que aix\u00ed ho hem configurat.</li> </ul> <p></p>"},{"location":"P2-S2/#copies-de-seguretat-i-automatitzacio","title":"C\u00f2pies de seguretat i automatitzaci\u00f3","text":"<p>Per poder fer les c\u00f2pies de seguretat afegirem un disc nou d'uns 10GB tal i com hem fet abans. Tamb\u00e9, amb l'eina de Windows configurarem tot el disc amb el format NTFS i l'anomenarem \"Backups\".</p> <p> </p> <ul> <li>Seguidament, quan ja haguem formatat el disc, crearem una carpeta anomenada \"C\u00f2piesUsuaris\" <code>(L'accent de la o pot portar a conflictes)</code>.</li> </ul> <p></p> <ul> <li>A continuaci\u00f3, farem un script per crear una c\u00f2pia de la carpeta de cada usuari dins de la nova que hem creat. Per fer un script ho podem fer obrint el bloc de notes i guardant el fitxer com un <code>.bat</code> <code>(IMPORTANT: Encara que el SO estigui amb qualsevol idioma la ruta del disc C ha de ser amb Users i no Usuarios)</code>.</li> </ul> <p> </p> <ul> <li>Per fer la prova executo l'script amb l'usuari administrador i com es pot veure la carpeta es crea correctament.</li> </ul> <p></p> <ul> <li>Un cop tenim l'script fet volem que aquest s'executi cada cop que un usuari inici sessi\u00f3 per tant, afegirem l'script a l'aplicaci\u00f3 \"gpedit\", a la qual podem accedir escrivint \"gpedit\" al cercador de Windows. Un cop all\u00e0 buscarem la configuraci\u00f3 de Windows d'usuaris i dins dels scripts escollirem els d'inici de sessi\u00f3.</li> </ul> <p></p> <ul> <li>Per comprovar el seu funcionament obrirem la sessi\u00f3 dels dos usuaris i comprovarem que si s'han realitzat les c\u00f2pies a la carpeta. <code>(Al obrir la sessi\u00f3 veurem que s'obre un terminal, \u00e9s normal ja que aix\u00ed es realitzen les c\u00f2pies, quan acabi es tanca sol).</code></li> </ul> <p> </p>"},{"location":"P2-S2/#gestio-de-processos","title":"Gesti\u00f3 de processos","text":"<p>El m\u00e9s important amb la gesti\u00f3 de processos de Windows \u00e9s l'eina tasklist que podem executar des del terminal de comandes (CMD). Aquesta comanda ens llistar\u00e0 tots els processos que s'estan duent a terme al nostre dispositiu, amb el seu nom, identificador del proc\u00e9s, nom i n\u00famero de sessi\u00f3 i l'\u00fas de mem\u00f2ria de cadascun.</p> <p></p> <ul> <li> <p>Si ens interessa podem deixar un registre del que s'est\u00e0 executant en aquell moment en un fitxer de text utilitzant la seg\u00fcent comanda. <pre><code>tasklist &gt; \"ruta on volem guardar l'arxiu\\nomarxiu.txt\"\n</code></pre> </p> </li> <li> <p>Com podem veure dins d'aquests processos hi ha alguns que s\u00f3n prescindibles per l'usuari, com poden ser els d'aplicacions com Skype, One Drive i algunes m\u00e9s. Aquestes poden suposar un malbaratament de recursos del sistema si en disposem de pocs, aix\u00ed que el que farem ser\u00e0 eliminar aquests processos \"in\u00fatils\". Per\u00f2 primer veurem alguns d'aquests i la mem\u00f2ria que utilitzen.</p> </li> </ul> <p></p> <ul> <li> <p>Per matar els processos utilitzarem la comanda  <pre><code>taskkill /IM \"nomproces\" /F\n</code></pre> </p> </li> <li> <p>Com es pot veure a la captura hi ha processos com el de Skype que tamb\u00e9 tenen un de background que tamb\u00e9 caldria \"matar\". </p> </li> <li>Aquesta manera de matar els processos cada vegada que obrim sessi\u00f3 es pot fer tediosa, per tant, com hem fet abans afegirem aix\u00f2 al nostre script d'inici de sessi\u00f3 perqu\u00e8 aix\u00ed cada cop que obrim sessi\u00f3 aquests processos prescindibles morin.</li> </ul> <p>(En aquest cas he creat un script nou incloent les noves comandes) </p> <ul> <li>Per comprovar el seu funcionament obrirem sessi\u00f3 amb l'alumne 2 i buscarem el proc\u00e9s de One Drive per veure si s'elimina.</li> </ul> <p> </p> <ul> <li>I qu\u00e8 passaria si matem un proc\u00e9s imprescindible? Doncs passaria el seg\u00fcent i per fer la prova matarem el proc\u00e9s <code>explorer.exe</code></li> </ul> <p></p> <ul> <li>Aquest proc\u00e9s \u00e9s el que ens permet navegar a trav\u00e9s de l'explorador d'arxius, el que ens mostra l'escriptori i la barra de tasques i tamb\u00e9 fa de motor gr\u00e0fic. Llavors matar aquest proc\u00e9s pot semblar la fi del nostre dispositiu. Per\u00f2 no hi ha problema amb la comanda <code>start</code> i el nom del proc\u00e9s el podem tornar a executar. L'\u00fanic que haurem de fer \u00e9s parar m\u00e9s compte amb quins processos matem.</li> </ul> <p></p>"},{"location":"P2-S2/#permisos","title":"Permisos","text":"<p>Si volem assignar permisos als usuaris que treballaran en certs entorns podem fer-ho de les seg\u00fcents maneres. En aquest cas el que farem ser\u00e0 al disc de \"Dades\" crear una carpeta anomenada \"Projectes\" on els usuaris alumne 1 i 2 treballaran. </p> <ul> <li>En primer lloc obrirem les propietats de la carpeta i a la pestanya de seguretat obrirem les opcions avan\u00e7ades.</li> </ul> <p></p> <ul> <li>Despr\u00e9s deshabilitarem l'her\u00e8ncia i escollirem la primera opci\u00f3. Tamb\u00e9 a l'opci\u00f3 d'agregar posarem el seg\u00fcent, i esborrarem a tots els usuaris que no siguin l'administrador.</li> </ul> <p> </p> <ul> <li>El que estem fent \u00e9s donar permisos m\u00e0xims als usuaris del grup Limitats. El resultat hauria de ser semblant a aquest.</li> </ul> <p></p> <ul> <li>Per fer proves entrarem amb l'alumne 1 a la carpeta i crearem un arxiu, l'editarem, l'esborrarem i veurem que podem fer el que vulguem ja que disposem de tots els permisos.</li> </ul> <p> </p> <ul> <li> <p>En el cas que vulguem fer alguna excepci\u00f3, com en aquest cas que l'alumne 2 nom\u00e9s pugui llegir, farem uns permisos especials amb la comanda. <pre><code>icacls \"D:\\Projectes\" /grant:r alumne2:(R)\n</code></pre> </p> </li> <li> <p>Per comprovar que nom\u00e9s tenim permisos de lectura intentarem crear algun objecte, modificar-lo i esborrar-lo, no podrem fer-ho de cap manera.</p> </li> </ul> <p> </p>"},{"location":"P2-S2/#annex","title":"Annex","text":""},{"location":"P2-S2/#tasklist-de-lalumne-2","title":"Tasklist de l'alumne 2","text":"<ul> <li>Per demostrar el funcionament de l'script adjunto la tasklist despr\u00e9s d'iniciar sessi\u00f3 amb l'alumne 2.</li> </ul> <pre><code>Nombre de imagen     PID Nombre de sesi\u00a2n N\u00a3m. de ses Uso de memor\n================ ======== ================ =============== \nSystem Idle Process   0 Services                    0       8 KB\nSystem                          4 Services                      0       144 KB\nRegistry                    112 Services                0   69.048 KB\nsmss.exe                    344 Services                0   1.080 KB\ncsrss.exe                   444 Services                0   4.528 KB\nwininit.exe                 520 Services                0   6.160 KB\nservices.exe                664 Services                0   11.064 KB\nlsass.exe                   672 Services                0   22.440 KB\nsvchost.exe                 800 Services                0   3.892 KB\nsvchost.exe                 828 Services                0   41.548 KB\nfontdrvhost.exe           844 Services                  0   2.472 KB\nsvchost.exe                 944 Services                0   17.732 KB\nsvchost.exe                 992 Services                0   8.552 KB\nsvchost.exe                 1060 Services                   0   6.388 KB\nsvchost.exe                 1140 Services                   0   18.464 KB\nsvchost.exe                 1148 Services                   0   15.912 KB\nsvchost.exe                 1156 Services                   0   11.360 KB\nsvchost.exe                 1164 Services                   0   13.320 KB\nsvchost.exe                 1176 Services                   0   12.444 KB\nsvchost.exe                 1324 Services                   0   7.248 KB\nsvchost.exe                 1372 Services                   0   10.320 KB\nsvchost.exe                 1384 Services                   0   8.428 KB\nsvchost.exe                 1504 Services                   0   7.408 KB\nsvchost.exe                 1616 Services                   0   11.196 KB\nsvchost.exe                 1708 Services                   0   8.132 KB\nsvchost.exe                 1724 Services                   0   7.524 KB\nsvchost.exe                 1744 Services                   0   71.340 KB\nsvchost.exe                 1768 Services                   0   5.804 KB\nMemory Compression 1852 Services                0   73.676 KB\nsvchost.exe                 1924 Services                   0   8.396 KB\nsvchost.exe                 1984 Services                   0   8.684 KB\nsvchost.exe                 1992 Services                   0   7.908 KB\nsvchost.exe                 2012 Services                   0   8.672 KB\nsvchost.exe                 2080 Services                   0   13.176 KB\nsvchost.exe                 2092 Services                   0   7.316 KB\nsvchost.exe                 2180 Services                   0   15.668 KB\nsvchost.exe                 2264 Services                   0   6.116 KB\nsvchost.exe                 2276 Services                   0   9.460 KB\nsvchost.exe                 2368 Services                   0   14.328 KB\nsvchost.exe                 2432 Services                   0   30.000 KB\nspoolsv.exe                 2564 Services                   0   12.804 KB\nsvchost.exe                 2612 Services                   0   19.904 KB\nsvchost.exe                 2640 Services                   0   7.696 KB\nsvchost.exe                 2692 Services                   0   6.508 KB\nsvchost.exe                 2780 Services                   0   30.860 KB\nsvchost.exe                 2792 Services                   0   17.624 KB\nsvchost.exe                 2804 Services                   0   41.128 KB\nsvchost.exe                 2812 Services                   0   18.312 KB\nsvchost.exe                 2888 Services                   0   5.580 KB\nwlms.exe                    2920 Services                   0   3.088 KB\nsvchost.exe                 2928 Services                   0   11.424 KB\nsvchost.exe                 2952 Services                   0   12.940 KB\nsvchost.exe                 2984 Services                   0   25.228 KB\nsvchost.exe                 1456 Services                   0   5.808 KB\nsvchost.exe                 3900 Services                   0   22.420 KB\nsvchost.exe                 4012 Services                   0   7.852 KB\nsvchost.exe                 3388 Services                   0   17.656 KB\nsvchost.exe                 6952 Services                   0   12.796 KB\nSearchIndexer.exe     7140 Services                 0   34.064 KB\nsvchost.exe                 6484 Services                   0   7.164 KB\nsvchost.exe                 7372 Services                   0   13.228 KB\nSecurityHealthService.exe 7704 Services                 0   15.304 KB\nsvchost.exe                 7984 Services                   0   7.224 KB\nsvchost.exe                 4292 Services                   0   6.268 KB\nsvchost.exe                 4372 Services                   0   9.372 KB\nsvchost.exe                 4288 Services                   0   10.768 KB\nsvchost.exe                 2256 Services                   0   13.484 KB\nsvchost.exe                 5872 Services                   0   9.036 KB\nsvchost.exe                 820 Services                0   19.416 KB\nSgrmBroker.exe         5856 Services                0   5.576 KB\nsvchost.exe                 5572 Services                   0   16.548 KB\nsvchost.exe                 7224 Services                   0   8.736 KB\nsvchost.exe                 7852 Services                   0   7.868 KB\nsvchost.exe                 2312 Services                   0   29.980 KB\nsvchost.exe                 2028 Services                   0   17.060 KB\nMsMpEng.exe            4912 Services                0    255.024 KB\nMpDefenderCoreService.exe 6760 Services             0   18.624 KB\ndllhost.exe                 3104 Services                   0   10.692 KB\nNisSrv.exe                  5712 Services                   0   10.164 KB\nWUDFHost.exe          5764 Services                 0   7.904 KB\nsvchost.exe                 7060 Services                   0   9.816 KB\nsvchost.exe                 4684 Services                   0   9.184 KB\nsvchost.exe                 8516 Services                   0   22.368 KB\nsvchost.exe                 10316 Services                  0   19.804 KB\nsvchost.exe                 5144 Services                   0   6.908 KB\nsvchost.exe                 2040 Services                   0   10.264 KB\ncsrss.exe                   8120 Console                10  4.920 KB\nwinlogon.exe                11924 Console                   10  9.448 KB\nfontdrvhost.exe           2288 Console                  10  4.056 KB\ndwm.exe                     3120 Console                10  68.736 KB\nsihost.exe                  7116 Console                10  24.544 KB\nsvchost.exe                 6244 Console                10  18.048 KB\nsvchost.exe                 11900 Console                   10  35.036 KB\ntaskhostw.exe              128 Console                  10  14.360 KB\nexplorer.exe                8440 Console                10      115.732 KB\nsvchost.exe                 5348 Console                10  17.208 KB\nStartMenuExperienceHost.e   10472 Console           10  55.000 KB\nRuntimeBroker.exe           3948 Console             10 21.368 KB\nRuntimeBroker.exe           1644 Console               10   34.036 KB\nApplicationFrameHost.exe    9884 Console               10   25.104 KB\nMicrosoftEdge.exe           9804 Console               10   61.080 KB\nbrowser_broker.exe          10988 Console               10  8.148 KB\nWindows.WARP.JITService.e   10196 Services               0  5.320 KB\nRuntimeBroker.exe           1220 Console               10   7.508 KB\nMicrosoftEdgeCP.exe         9100 Console               10   26.308 KB\nMicrosoftEdgeSH.exe         768 Console                 10  13.420 KB\nctfmon.exe                      9372 Console               10   14.376 KB\nRuntimeBroker.exe           2684 Console               10   12.656 KB\nsmartscreen.exe             9572 Console               10   22.936 KB\nSecurityHealthSystray.exe   4112 Console               10   8.440 KB\ndllhost.exe                     2704 Console               10   12.552 KB\nMusNotifyIcon.exe           5728 Console               10   13.604 KB\nShellExperienceHost.exe     9536 Console               10   58.496 KB\nRuntimeBroker.exe           10364 Console               10  21.504 KB\nSystemSettingsBroker.exe 3536 Console               10  22.940 KB\nsvchost.exe                 7388 Services                   0   8.240 KB\nsvchost.exe                 11952 Services                  0   6.604 KB\nsvchost.exe                 9828 Services                   0   11.824 KB\ncmd.exe                     7968 Console                10  4.036 KB\nconhost.exe                 9908 Console                10  23.284 KB\nRuntimeBroker.exe    6440 Console                    10 24.216 KB\nsvchost.exe                 5552 Services                   0   7.108 KB\nsvchost.exe                 2688 Console                10  11.760 KB\ntasklist.exe                11316 Console                   10  8.384 KB\nWmiPrvSE.exe           4180 Services                0   8.440 KB\n</code></pre>"},{"location":"P2-S3/","title":"P2 S3","text":""},{"location":"P2-S3/#introduccio","title":"Introducci\u00f3","text":"<p>En aquest sprint veurem com configurar i administrar dominis en un entorn windows, gestionant comptes d'usuari, grups i perfils m\u00f2bils. Tamb\u00e9 establirem pol\u00edtiques de seguretat i control d'acces als rescursos tant locals com de xarxa.</p>"},{"location":"P2-S3/#active-directory","title":"Active Directory","text":"<p>Active Direcotry es com microsoft anomena a l'implementaci\u00f3 de servei de directori en una xarxa distribu\u00efda de computadors. </p> <p>Microsoft. (s. f.). Informaci\u00f3n general sobre los servicios de dominio de Active Directory. Microsoft Learn. https://learn.microsoft.com/es-es/windows-server/identity/ad-ds/get-started/virtual-dc/active-directory-domain-services-overview</p> <p>En aquest apartat veurem com configurar-lo. Com a pas previ, configurarem un segon adaptador de xarxa a la nostra m\u00e0quina servidor de windows. Una amb NAT i l'altra amb xarxa interna per simular les dos variants.</p> <p></p> <ul> <li>Seguidament, entrarem a la configuraci\u00f3 de xarxa del servidor per veure s'hi detecta els dos adaptadors.</li> </ul> <p></p> <ul> <li>A continuaci\u00f3, com ja tenim una adre\u00e7a per un dels adaptadors configurarem l'altra amb IPv4 tal com es mostra a continuaci\u00f3. I despr\u00e9s ho comprovarem amb el CMD.</li> </ul> <p> </p>"},{"location":"P2-S3/#-domini","title":"- Domini","text":"<p>Per comen\u00e7ar obrirem la configuraci\u00f3 del servidor, l'eina es diu <code>Administrador del serviodr</code>. Aqu\u00ed agregarem rols i caracteristiques com es mostra.</p> <p></p> <ul> <li>Per continuar, seguirem els passos que es mostren, escollint en primer lloc, la instal\u00b7laci\u00f3 basada en rols. I escollint el nostre servidor.</li> </ul> <p> </p> <ul> <li>A continuaci\u00f3, escollirem els serveis de DNS i els de l'Active Directory. I ens assegurearem que les caracteristiques corresponen als serveis escollits. Per \u00faltim confirmem la configuraci\u00f3 escollida.</li> </ul> <p> </p> <ul> <li>Per acabar, veurem que despr\u00e9s de la instal\u00b7laci\u00f3 es requereix una configuraci\u00f3, al de promoure el servidor a contolador de domini.</li> </ul> <p></p> <ul> <li>Ara comen\u00e7arem amb aquesta configuraci\u00f3, escollint el nom del nostre domini i agregant un nou \"bosc\".</li> </ul> <p></p> <ul> <li>Seguidament, escollirem la contasenya del nostre domini. Ens donar\u00e0 un error de DNS, aquest es normal, l'ignorarem, i seguirem amb la configuraci\u00f3 escollint el nom de la NetBios.</li> </ul> <p> </p> <ul> <li>EN aquest moment, podem veure la revisi\u00f3 de tots els passos i generar un script per aquests.</li> </ul> <p></p> <ul> <li>Finalment, despr\u00e9s de revisar-ho tot procedirem amb l'instal\u00b7laci\u00f3, aquesta reiniciar\u00e0 el servidor, i despr\u00e9s ja podrem iniciar sessi\u00f3 com administrador.</li> </ul> <p> </p>"},{"location":"P2-S3/#-unio-dequips","title":"- Uni\u00f3 d'equips","text":"<p>Per unir equips al nostre domini el primer que farem es configurar la xarxa del client per a que aquest tingui de porta d'enlla\u00e7 i servidor la nostra m\u00e0quina servidor. Un cop configurada revisarem la seva ip a trav\u00e9s del CMD.</p> <p> </p> <ul> <li>Seguidament comporvarem la connectivitat entre les dos m\u00e0quines fent un ping. (\u00c9s possible que sigui necessari desactivar el firewall, tamb\u00e9 es important que estiguin a la mateixa xarxa de VB).</li> </ul> <p> </p> <ul> <li>Un cop verificada la connectivitat a la nostra m\u00e0quina client obrirem la configuraci\u00f3 del sistema avan\u00e7ada i a nom d'equip i grup la canviarem.</li> </ul> <p></p> <ul> <li>En aquest punt escollim membre del domini, i posem el domini que hem creat. Ens retornar\u00e0 un missatge de que s'ha fet correctament, i haurem de reiniciar el clietn.</li> </ul> <p> </p>"},{"location":"P2-S3/#-usuaris","title":"- Usuaris","text":"<p>Un cop tenim un equip unit al client procedirem amb la creaci\u00f3 d'usuaris i per fer aix\u00f2 recorrirem a l'eina <code>Usuarios y equipos Active DIrectory</code>. Un cop dins ens desplacem per l'arbre de directoris i escollim la carpeta usuaris. Un cop dins amb el bot\u00f3 dret crearem un usuari nou.</p> <p> </p> <ul> <li>A continuaci\u00f3 ens sortir\u00e0 una finestra de configuraci\u00f3, per exemple farem un usuari que sigui Keanu.</li> </ul> <p> </p> <ul> <li>Seguidament, quan tenim l'usuari creat obrirem la nostra m\u00e0quina <code>Client</code>, all\u00e0 a \"otros usuarios\" posem l'usuari que hem creat, per connectar-nos amb ell.</li> </ul> <p> </p>"},{"location":"P2-S3/#-hores-dinici-de-sessio","title":"- Hores d'inici de sessi\u00f3","text":"<p>Als usuaris tamb\u00e9 els podem establir un temps del dia durant el qual poden establir sessi\u00f3, aix\u00f2 ens pot ser \u00fatil per assegurar que els usuaris sol entrin en el seu horari de treball, ara veurem com es configura i que passa si intentem entrar fora del nostre horari.</p> <p> </p>"},{"location":"P2-S3/#-grups","title":"- Grups","text":"<p>Tamb\u00e9 configurarem grups, per fer un grup seguirem uns passos similars als de l'usuari, per\u00f2 a l'hora de crear un usuari canviarem l'opci\u00f3 per la de crear un grup.</p> <p></p> <ul> <li>Quan escollim aquesta opci\u00f3 se'ns obrir\u00e0 una finestra de configuraci\u00f3 per introduir les dades del grup, i despr\u00e9s els seus membres.</li> </ul> <p> </p> <ul> <li>Seguidament afegirem un altre usuari al nostre grup i farem que aquest sigui l'administrador del grup, afegint simplement a la pestanya de \"Administrado por\" l'usuari que volem.</li> </ul> <p> </p>"},{"location":"P2-S3/#-acces-remot","title":"- Acc\u00e9s remot","text":"<p>Per tal d'accedir a internet amb el client a trav\u00e9s del servidor hem de configurar l'enrutament i l'acc\u00e9s remot, es important que hi hagi un dels adaptadors dels servidor amb NAT.</p> <ul> <li>En primer lloc, per configurar l'acc\u00e9s remot anirem a la configuraci\u00f3 de rols del servidor, i seguint els mateixos passos que per crear el domini fins arribar al punt de rols, en aquest punt escollim <code>Acceso remoto</code>. I seguidament tots els serveis que ens surtin. </li> </ul> <p> </p> <ul> <li>Quan fem la instal\u00b7laci\u00f3 ens sortir\u00e0 un missatge emergent per fer una configuraci\u00f3, i se'ns obrir\u00e0 la finestra de <code>enrutamiento y acceso remoto</code>.</li> </ul> <p></p> <ul> <li>Despr\u00e9s de donar-li a siguiente a la seg\u00fcent pestanya escollirem l'opci\u00f3 NAT i l'adaptador de xarxa que tenim configurat per NAT. Un cop fet aix\u00f2 se'ns instal\u00b7lar\u00e0 la configuraci\u00f3 i s'iniciar\u00e0 l'enrutament i acc\u00e9s remot.</li> </ul> <p> </p> <ul> <li>Per comprovar el seu funcionament desde la m\u00e0quina <code>client</code>, farem un ping a google.</li> </ul> <p></p>"},{"location":"P2-S3/#-unitats-organitzatives-uo-i-gpos","title":"- Unitats organitzatives (UO) i GPOs","text":"<p>Les unitats organitzatives (OU) d\u2019un domini administrat amb els Serveis de Domini d\u2019Active Directory (AD DS) et permeten agrupar l\u00f2gicament objectes com comptes d\u2019usuari, comptes de servei o comptes d\u2019equip. Despr\u00e9s, pots assignar administradors a unitats organitzatives espec\u00edfiques i aplicar-hi la directiva de grup per establir els valors de configuraci\u00f3 desitjats.</p> <p>Microsoft. (s. f.). Crear una unidad organizativa (OU) en Domain Services administrado. Microsoft Learn. https://learn.microsoft.com/es-es/entra/identity/domain-services/create-ou</p> <ul> <li>Igual que amb usuaris i grups, per crear una UO, amb el bot\u00f3 dret del ratol\u00ed damunt del nostre domini i afegim una Unitat organitzativa. La seva configuraci\u00f3 es la seg\u00fcent.</li> </ul> <p> </p> <ul> <li>Dins d'aquesta afegirem alguns usuaris per fer proves. </li> </ul> <p></p>"},{"location":"P2-S3/#-gpos","title":"- GPOs","text":"<p>La directiva de grup permet configurar la configuraci\u00f3 de l\u2019usuari i de l\u2019equip en equips que executen sistemes operatius Windows Server i clients Windows. A m\u00e9s d\u2019utilitzar la directiva de grup per definir configuracions per a grups d\u2019usuaris i equips clients, tamb\u00e9 es pot utilitzar per ajudar a administrar equips servidors, configurant moltes opcions operatives i de seguretat espec\u00edfiques del servidor.</p> <p>Microsoft. (s. f.). Informaci\u00f3n general sobre la directiva de grupo. Microsoft Learn. https://learn.microsoft.com/es-es/windows-server/identity/ad-ds/manage/group-policy/group-policy-overview</p> <ul> <li>Per crear un GPO obrirem l'eina gr\u00e0fica <code>Administraci\u00f3n de directivas de grupo</code>, i damunt de la UO que hem creat pr\u00e8viament crearem un GPO i el vincularem tal com es mostra. I li direm restriccions.</li> </ul> <p> </p> <ul> <li>La primera politica que aplicarem ser\u00e0 que per als usuaris de la UO cada cop que inici\u00efn sessi\u00f3 els surti un missatge de benvinguda, i un text.</li> </ul> <p> </p> <ul> <li>Despr\u00e9s \u00e9s proibir\u00e0 l'acc\u00e9s a la configuraci\u00f3 del bluetooth i al panell de control.</li> </ul> <p> </p> <ul> <li>Amb la configuraci\u00f3 que tenim fins ara farem les proves amb els usuaris corresponents.</li> </ul> <p> <code>la seg\u00fcent es obrin el panell de control</code> </p>    El teu navegador no suporta la reproducci\u00f3 de v\u00eddeo.  <ul> <li>Ara probarem creant una nova GPO que contradigui l'anterior que hem fet i deshabilitarem la prohibici\u00f3 del panell de control.</li> </ul> <p></p> <ul> <li>En aquest punt obrirem la delegaci\u00f3 del GPO sol per a que apliqui a un usuari, en aquest cas George i li donarem l'opci\u00f3 de \"exigido\" per a que tinguin la mateixa prioritat.</li> </ul> <p> </p> <ul> <li>Quan hi ha una contradicci\u00f3, o almenys amb aquest cas s'aplica la de primer ordre, per tant la primera. </li> </ul>"},{"location":"P2-S3/#-gpo-de-contrasenyes","title":"- GPO de contrasenyes","text":"<p>A part de les GPO que hem vist fins ara hi ha unes que son molt importants a l'hora d'organitzar usuaris, i son les politiques de contrasenya, si volem una configuraci\u00f3 b\u00e0sica per les contrasenyes les podrem configurar de la seg\u00fcent forma.</p> <p> </p> <ul> <li>D'aquesta manera ens assegurem que podem recordar fins 10 contrasenyes, que ha de ser complexa i de 8 caracters com a m\u00ednim. Que pot estar vigent fins 3 mesos i que un cop canviada has d'esperar tres dies per tornar-la a canviar.</li> </ul>"},{"location":"P2-S3/#-perfils-mobils","title":"- Perfils m\u00f2bils","text":"<p>Els perfils m\u00f2bils fan que la informaci\u00f3 d'una carpeta d'usuari s'emmagatzemi al servidor, d'aquesta forma es fan accessibles desde tots els clients que formin part del domini.</p> <ul> <li>Per configurar els perfils m\u00f2bils el primer ser\u00e0 crear una carpeta que es dir\u00e0 Pmobils i un grup de Pmobils on hi hagin els usuaris amb els quals farem proves. A la carpeta li obrim les propietats i a avan\u00e7ats escollim el grup i li donem permisos d'escriptura i lectura.</li> </ul> <p></p> <ul> <li>Seguidament veurem que tenim una ruta d'acces a la xarxa, la copiarem ja que ens far\u00e0 falta, per afegir-la de ruta d'acc\u00e9s al perfil de l'usuari que vulguem. En aquest punt ho faig amb Kenau ja que l'he afegit al grup Pmobil.</li> </ul> <p> </p> <ul> <li>Desde el client ens connectem amb keanu i a la ruta de la carpeta podrem accedir sense problemes.</li> </ul> <p></p> <ul> <li>Per verificar que es m\u00f2bil amb a les propietats del sistema podem consultar la configuraci\u00f3 de perfils d'usuaris i veurem que keanu surt com a m\u00f2bil.</li> </ul> <p></p> <ul> <li>Seguidament si entrem desde el server amb l'usuari Keanu (s'ha de donar perm\u00eds abans), veurem que tamb\u00e9 podem accedir a la carpeta de Pmobils, tant de forma local com amb la de xarxa. <code>Per\u00f2 per poder-hi accedir amb el servidor hem de configurar la carpeta com si el propietari fos l'administrador</code>.</li> </ul> <p> </p> <ul> <li>Ara que tenim acc\u00e9s desde les dos m\u00e0quines, crearem un fitxer de prova desde el servidor i despr\u00e9s ha de ser accessible desde el client.</li> </ul> <p> </p> <ul> <li>D'aquesta manera veurem que els canvis s'apliquen independentment de la m\u00e0quina amb la que es realitzen.</li> </ul>"},{"location":"P2-S3/#-perfils-obligatoris","title":"- Perfils obligatoris","text":"<p>Un perfil d\u2019usuari obligatori \u00e9s un perfil d\u2019usuari m\u00f2bil preconfigurat per un administrador per especificar la configuraci\u00f3 dels usuaris. La configuraci\u00f3 definida normalment en un perfil obligatori inclou (per\u00f2 no es limita a) les icones que apareixen a l\u2019escriptori, els fons d\u2019escriptori, les prefer\u00e8ncies de l\u2019usuari al Tauler de control, la selecci\u00f3 d\u2019impressores, etc. Els canvis de configuraci\u00f3 fets durant la sessi\u00f3 d\u2019un usuari, que normalment es desarien en un perfil d\u2019usuari m\u00f2bil, no es guarden quan s\u2019assigna un perfil d\u2019usuari obligatori.</p> <p>Els perfils d\u2019usuari obligatoris s\u00f3n \u00fatils quan la normalitzaci\u00f3 \u00e9s important, com en un dispositiu a pantalla completa o en un entorn educatiu. Nom\u00e9s els administradors del sistema poden fer canvis en els perfils d\u2019usuari obligatoris.</p> <p>Microsoft. (s. f.). Perfil de usuario obligatorio. Microsoft Learn. https://learn.microsoft.com/es-es/windows/client-management/client-tools/mandatory-user-profile</p> <ul> <li>Per configurar un perfil obligatori anirem com administrador al <code>servidor</code> i a la carpeta de mobils i usuari keanu veurem un fitxer ocult <code>NTUSER.DAT</code>, si canviem l'extensi\u00f3 a .MAN farem que aquest perfil pasi a ser obligatori.</li> </ul> <p> </p> <ul> <li>Per verificar el canvi que hem fet obrim sessi\u00f3 amb el <code>client</code> i tal com hem fet abans anem a les propietats del sistema, configuraci\u00f3 de perfils d'usuaris i all\u00e0 veurem que Keanu consta com obligatori.</li> </ul> <p></p>"},{"location":"P2-S3/#-permisos-i-recursos-compartits","title":"- Permisos i recursos compartits","text":"<p>Per comprovar els persmisos dels recursos compartits primer farem dos grups extra un de permissiu i un de restrictiu, on afegirem diferents usuaris.</p> <p></p> <ul> <li>Seguidament crearem una carpeta anomenada \"Treballs\" on a les propietats de compartir afegirem els dos grups, el permissiu podr\u00e0 fer-ho tot, mentre que el restrictiu sol tindr\u00e0 perm\u00eds de lectura.</li> </ul> <p></p> <ul> <li>Desde el client accedim com l'usuari que es dins del grup permissiu, i dins de la carpeta creem un fitxer amb el seu nom i un text identificatiu.</li> </ul> <p></p> <ul> <li>Per acabar, desde el client ens connectem com l'usuari del grup restrictiu i intentem modificar algun fitxer, com podrem veure no ens deixa ja que ens falten permisos.</li> </ul> <p></p>"},{"location":"P2-S4/","title":"P2 S4","text":""},{"location":"P2-S4/#introduccio","title":"Introducci\u00f3","text":"<p>En aquest sprint veurem com configurar un sistema de RAID 5 a un sistema WIndows Server. Dins d'aquest comprovarem com funcionen els volums davant d'errades.</p>"},{"location":"P2-S4/#raid-5","title":"RAID 5","text":"<p>En primer lloc afegirem tres discs de 10 GB a la nostra m\u00e0quina virtual.</p> <p></p> <ul> <li>Un cop afegits els 3 disc nous obrim el sistema i l'administraci\u00f3 de discs d'aquest. Un cop entrem ens sortiran els discs per donar-los un format, escollim el MBR.</li> </ul> <p></p> <ul> <li>Seguidament, veurem que els tres discs de 10GB estan per assignar, amb el bot\u00f3 dret escollirem l'opci\u00f3 de nuevo volumen RAID-5 en qualsevol dels discs.</li> </ul> <p> </p> <ul> <li>A continuaci\u00f3, se'ns obrir\u00e0 la finestra d'asistent per configurar el RAID.</li> </ul> <p></p> <ul> <li>Un cop avancem a la seg\u00fcent part escollirem els dos discs restants per agregar-los al RAID i clicarem a \"siguiente\". Escollirem la lletra de l'unitat, el format i l'etiqueta del volum al nostre gust. I per \u00faltim, tindrem una finestra de confirmaci\u00f3 i finilitzarem la configuraci\u00f3 </li> </ul> <p> </p> <ul> <li> <p>En acabar de configurar es comen\u00e7aran a formatar els discs de forma automatica.  </p> </li> <li> <p>En aquest punt ens descarregem dues imatges i creem un fitxer de text per fer proves, a una carpeta anomenada \"prova\".</p> </li> </ul> <p></p> <ul> <li>Un cop tenim els arxius de prova, desactivarem un dels discs del RAID, per fer aix\u00f2 dins del administrador de discs fem clic dret a un d'ells i escollim l'opci\u00f3 sense connexi\u00f3. Veurem que ens donar\u00e0 un error de redundancia.</li> </ul> <p> </p> <ul> <li>Tot i aix\u00f2, els arxius de prova es segueixen llegint i podem accedir a ells.</li> </ul> <p></p> <ul> <li>Finalment, desactivarem un altre disc, i com ve sabem aquest RAID necessita com a minim dos discs per funcionar, un cop feta la desactivaci\u00f3 del segon disc veurem que les dades ens queden inaccesibles.</li> </ul> <p> </p> <ul> <li>Per \u00faltim, el que darem es recuperar / reactivar els discs, amb el clic dret del ratoli escollim l'opci\u00f3 de en linia. Veurem que amb un d'apagat seguim amb el problema de redundancia pero es pot accedir a les dades.</li> </ul> <p> </p> <ul> <li>Per tornar a la normalitat activem el tercer disc i veurem que es sincronitza, un cop acabi tot quedar\u00e0 com al principi.</li> </ul> <p> </p> <ul> <li>D'altra banda si perdem un dels discs de forma permanent i n'afegim un de nou, per recuperar el RAID haurem de fer una copia de seguretat ja que ens tocar\u00e0 tornar a fer el RAID sencer. Tal i com es pot veure a les captures seg\u00fcents.</li> </ul> <p> </p>"},{"location":"P2-S5/","title":"P2 S5","text":""},{"location":"P2-S5/#introduccio","title":"Introducci\u00f3","text":"<p>En aquest Sprint veurem com configurar una auditoria en un entorn WIndows serve i com actua sobre el client. Despr\u00e9s tamb\u00e9 farem un monitoratge de l'auditoria.</p>"},{"location":"P2-S5/#auditoria-server","title":"Auditoria Server","text":"<p>Per fer una auditoria amb Windows l'haurem de configurar a trav\u00e9s de les GPOS, ho farem de la seg\u00fcent manera, entrant al llistat de configuraci\u00f3 de windows, configuraci\u00f3 de seguretat, directives d'auditoria i a partir d'aqu\u00ed les configurarem.</p> <p></p> <ul> <li>El seg\u00fcent pas ser\u00e0 definir quines politiques volem i com les monitoritzarem, podem configurar cadascuna per posar que sol funcioni amb error o amb l'estat correcte. La primera que configurarem ser\u00e0 la de acc\u00e9s a objectes.</li> </ul> <p></p> <ul> <li>Per verificar i monitoritzar diferents accessos i events del sistema activarem totes les opcions marcades de la seg\u00fcent imatge.</li> </ul> <p></p> <ul> <li>A continuaci\u00f3, des de l'eina de <code>visor de eventos</code> a l'apartat de seguretat veurem els processos que hem auditorat a la GPO, en aquest cas podem veure un process acabat de forma abrupta, aquest te una ID de 4869.</li> </ul> <p> </p> <ul> <li>Ara farem una prova d'inici de sessi\u00f3 d'usuari desde la m\u00e0quina client. L'usuari Keanu es connectar\u00e0 i nosaltres desde el visor de eventos haurem de veure una categoria Logon amb un ID 4624.</li> </ul> <p></p> <ul> <li>La seg\u00fcent prova es eliminar un usuari del nostre AD i veure quin ID ens dona desde el visor. Eliminarem l'usuari Antoni Banderas i l'ID que ens apareixer\u00e0 es el 4726.</li> </ul> <p> </p>"}]}