
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://https:/marcgnd.github.io/mkdocs-marc-sabate/P1-S5/">
      
      
        <link rel="prev" href="../P1-S4/">
      
      
        <link rel="next" href="../P2-S1/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>P1 S5 - MkDocs Marc Sabate</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduccio" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="MkDocs Marc Sabate" class="md-header__button md-logo" aria-label="MkDocs Marc Sabate" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MkDocs Marc Sabate
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              P1 S5
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Implantació de sistemes operatius

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../P1-S1/" class="md-tabs__link">
        
  
  
    
  
  P1 S1

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../P1-S2/" class="md-tabs__link">
        
  
  
    
  
  P1 S2

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../P1-S3/" class="md-tabs__link">
        
  
  
    
  
  P1 S3

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../P1-S4/" class="md-tabs__link">
        
  
  
    
  
  P1 S4

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
  
    
  
  P1 S5

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../P2-S1/" class="md-tabs__link">
        
  
  
    
  
  P2 S1

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../P2-S2/" class="md-tabs__link">
        
  
  
    
  
  P2 S2

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../P2-S3/" class="md-tabs__link">
        
  
  
    
  
  P2 S3

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../P2-S4/" class="md-tabs__link">
        
  
  
    
  
  P2 S4

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../P2-S5/" class="md-tabs__link">
        
  
  
    
  
  P2 S5

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="MkDocs Marc Sabate" class="md-nav__button md-logo" aria-label="MkDocs Marc Sabate" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    MkDocs Marc Sabate
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Implantació de sistemes operatius
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../P1-S1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P1 S1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../P1-S2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P1 S2
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../P1-S3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P1 S3
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../P1-S4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P1 S4
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    P1 S5
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    P1 S5
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccio" class="md-nav__link">
    <span class="md-ellipsis">
      Introducció
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoritzacio" class="md-nav__link">
    <span class="md-ellipsis">
      Monitorització
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Monitorització">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logs" class="md-nav__link">
    <span class="md-ellipsis">
      LOGS
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LOGS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-journal" class="md-nav__link">
    <span class="md-ellipsis">
      - Journal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-logs-en-xarxa" class="md-nav__link">
    <span class="md-ellipsis">
      - LOGS en xarxa
    </span>
  </a>
  
    <nav class="md-nav" aria-label="- LOGS en xarxa">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-receptor" class="md-nav__link">
    <span class="md-ellipsis">
      -Receptor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-emissor" class="md-nav__link">
    <span class="md-ellipsis">
      -Emissor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-rendiment" class="md-nav__link">
    <span class="md-ellipsis">
      - Rendiment
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#servidor-actualitzacions" class="md-nav__link">
    <span class="md-ellipsis">
      Servidor actualitzacions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Servidor actualitzacions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-servidor" class="md-nav__link">
    <span class="md-ellipsis">
      - Servidor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-client" class="md-nav__link">
    <span class="md-ellipsis">
      - Client
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auditoria" class="md-nav__link">
    <span class="md-ellipsis">
      Auditoria
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auditoria">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-lynis" class="md-nav__link">
    <span class="md-ellipsis">
      - Lynis
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../P2-S1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2 S1
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../P2-S2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2 S2
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../P2-S3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2 S3
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../P2-S4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2 S4
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../P2-S5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2 S5
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h2 id="introduccio">Introducció</h2>
<p>En aquest sprint veurem com funciona la monitorització tant de Logs del sistema, ja sigui de forma remota o local; i també com funcionen les eines d'Ubuntu per monitortizar el rendiment de la nostra màquina.
A més a més, descriurem com fer que un dispositiu ens serveixi per fer de servidor d'actualitzacions. I per últim utilitzarem l'eina Lynis per simular una auditoria.</p>
<h2 id="monitoritzacio">Monitorització</h2>
<h3 id="logs">LOGS</h3>
<p>Els LOGS son una serie de registres que emmagatzemen informació de tot el sistema, són una font de registres de totes les parts del sistema i recopilen tot tipus d'informació que ens pot ser rellevant, per això ens interessa monitoritzar-los. Poden haver logs del sistema i logs d'aplicacions .</p>
<ul>
<li>
<p>La majoria d'aquestos LOGS es troben al directori <code>/var/log</code>. Com podem apreciar hi ha logs de tot tipus.
<img alt="LOG" src="../LOG.png" /></p>
</li>
<li>
<p>Un de les coses que podem fer amb aquestos LOGS es actualitzar la seva rotació ja que tampoc ens interessa que estiguin vagant pel sistema eternament, aixi que configurarem el fitxer <code>/etc/logrotate.conf</code> per assignar-los un tipus de rotació, per exemple setmanalment.
<img alt="LOG1" src="../LOG1.png" /></p>
</li>
<li>
<p>Dins del direcotri <code>/etc/logrotate.d</code> podem configurar alguna rotació de logs en concret.
<a href="../LOG2.png">LOG2</a></p>
</li>
<li>
<p>Per provar com configurar la rotació d'un log en concret escollirem els logs de dpkg en aquest cas. lA configuració ens mostra que els arxius rotaran cada mes que d'aquests es conservaran els últims 12 arxius de logs antics abans d'eliminar-los, que els antics es comprimiràn, i que la compressió es farà després de la rotació. Finalment es donaran els permisos.
<img alt="LOG3" src="../LOG3.png" /></p>
</li>
<li>
<p>Ara veurem els logs del sistema al fitxer <code>/etc/rsyslog.d/50-defaul.conf</code>, en aquest fitxer podem configurar quins logs es mostren i quins no al fitxer al qual estan assignats. <code>Després de modificar-lo s'ha de reiniciar el servei</code>.
<img alt="LOG4" src="../LOG4.png" /></p>
</li>
<li>
<p>Per fer una prova enviarem una alerta al servei de mail i després farem un cat al arxiu on es guarden els logs del mail per veure si ha registrat l'alerta.
<img alt="LOG5" src="../LOG5.png" /></p>
</li>
<li>
<p>Ara, el que volem es que TOTES les alertes de nivell critic quedin registrades a una nova carpeta, on podrem analitzar tots els logs d'alerta critica. Com hem dit abans si modifiquem aquest arxiu s'ha de reiniciar el sistema.
<img alt="LOG6" src="../LOG6.png" />
<img alt="LOG7" src="../LOG7.png" /></p>
</li>
<li>
<p>A continuació, per comprovar que els canvis funcionen crearem una alerta critica anomenada Bomba, i llavors consultarem la carpeta dels logs que hem creat per comprovar si realment apareix la bomba.
<img alt="LOG8" src="../LOG8.png" /></p>
</li>
</ul>
<h4 id="-journal">- Journal</h4>
<p>El journal consulta el fitxer systemd journal, que unifica logs de diferents serveis i components del sistema en un sol lloc. En canvi el cat sol ens mostra informació d'un sol fitxer, el que estem consultant.</p>
<ul>
<li>En aquest cas farem la consulta <code>journalctl -p crit</code>, el -p filtra els registres i el crit els que son critics. El resultat ens mostra errors del RAID, un error d'autenticació que em va passar per equivocar-me amb la contrasenya tres cops, i després la BOMBA i les alertes que hem generat.
<img alt="LOG9" src="../LOG9.png" /></li>
</ul>
<h4 id="-logs-en-xarxa">- LOGS en xarxa</h4>
<h5 id="-receptor">-Receptor</h5>
<ul>
<li>
<p>El primer pass es configurar el dispositiu que rebrà els logs. Instal·lant el següent paquet i modificant l'arxiu <code>/etc/rsyslog.conf</code> seguint els passos que es mostraràn que són treure el comentari de <code>module</code> i <code>input</code>. 
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo apt install rsyslog
</code></pre></div>
<img alt="logremot" src="../logremot.png" />
<img alt="logremot1" src="../logremot1.png" /></p>
</li>
<li>
<p>Un cop desada la configuració farem un reinici del servei rsyslog i obrirem els ports per a que el tallafocs ens permeti la connexió.
<img alt="logremot2" src="../logremot2.png" /></p>
</li>
</ul>
<h5 id="-emissor">-Emissor</h5>
<ul>
<li>
<p>El següent pas es configurar el dispositiu que rebrà els LOGS. Torenem a instal·lar el paquet <code>rsyslog</code> i configurarem el fitxer <code>/etc/rsyslog.conf</code>. El més important es posar l'ip correctament
<img alt="logremot3" src="../logremot3.png" /></p>
</li>
<li>
<p>En acabar la configuració de l'arxiu a la màquina <code>receptor</code> utilitzarem la comanda tail -f/var/log/syslog.
<img alt="logremot4" src="../logremot4.png" /></p>
</li>
<li>
<p>Ara ens situem a <code>l'emissor</code> on farem un intent fallit de connexió com a root per generar un log.
<img alt="logremot5" src="../logremot5.png" /></p>
</li>
<li>
<p>Finalment desde la màquina <code>receptor</code> veurem que ens arriba un registre amb l'ip de l'altra màquina.
<img alt="logremot6" src="../logremot6.png" /></p>
</li>
</ul>
<h3 id="-rendiment">- Rendiment</h3>
<p>Per visualitzar el rendiment podem utilitzar una eina propia d'Ubuntu, el monitor del sistema. 
<img alt="Rendiment" src="../Rendiment.png" /></p>
<ul>
<li>
<p>En aquest monitor podem llistar els processos, recursos i arxius del sistema. 
<img alt="Rendiment1" src="../Rendiment1.png" /></p>
</li>
<li>
<p>A continuació executarem un procés per veure els recursos que consumeix, la prioritat i l'usuari que l'executa. Això ens pot servir per detectar alguns processos que tinguin molt consum o bé que siguin d'un usuari que no hauria d'executar-los.
<img alt="Rendiment2" src="../Rendiment2.png" /></p>
</li>
<li>
<p>Aquí podem veure altres processos ordenats per us de la cpu amb %.
<img alt="Rendiment3" src="../Rendiment3.png" /></p>
</li>
<li>
<p>Per acabar també podem veure el consum de recursos de forma gràfica.
<img alt="Rendiment4" src="../Rendiment4.png" /></p>
</li>
</ul>
<h1 id="servidor-actualitzacions">Servidor actualitzacions</h1>
<p>Un servidor d'actualitzacions es un servidor al qual diversos equips clients estàn connectats i agafen els paquets d'actualitzacions d'aquesta màquina servidor, així no col·lapsem els serveis si molts clients es volen descarregar un paquet a la vegada. Per comprovar el funcionament d'aquesta metodologia utlitzarem l'eina apache.</p>
<h2 id="-servidor">- Servidor</h2>
<ul>
<li>
<p>En primer lloc, instal·larem el paquet apache.
<img alt="SA" src="../SA.png" /></p>
</li>
<li>
<p>Segudiament, instal·larem el paquet mirror, que serà el que ens permetrà copiar qualsevol cosa que tinguem en un directori a un altre, com si fos un mirall.
<img alt="SA1" src="../SA1.png" /></p>
</li>
<li>
<p>A continuació, al fitxer <code>/etc/apt/mirror.list</code> configurarem el paquet d'instal·lació de google chrome. 
<img alt="SA2" src="../SA2.png" /></p>
</li>
<li>
<p>Un cop tenim aquest fitxer modificat executarem l'apt-mirror 
<img alt="SA3" src="../SA3.png" /></p>
</li>
<li>
<p>Després, ens assegurarem que a la carpeta del mirror hi hagi el paquet d'instal·lació del chrome de la següent manera:
<img alt="SA4" src="../SA4.png" /></p>
</li>
</ul>
<p>Si hem seguit tots aquests passos la part de configurar el servidor ja ha finalitzat, ara procedirem a la configuració del client per poder accedir al instal·lador del chrome del client al servidor.</p>
<h2 id="-client">- Client</h2>
<ul>
<li>
<p>El primer pas és afegir la clau GPG de Google al sistema. Aquesta clau s'utilitza per verificar la integritat i autenticitat dels paquets descarregats des dels repositoris de Google, en aquest cas Chrome.
<img alt="SAC" src="../SAC.png" /></p>
</li>
<li>
<p>A més a més, al fitxer <code>ubuntu.sources</code> afegirem la ruta del paquet del chrome, però, amb la IP del nostre servidor.
<img alt="SAC1" src="../SAC1.png" /></p>
</li>
<li>
<p>Seguidament, modificarem l'arxiu <code>/etc/apt/sources.list.d/ubuntu.sources</code> que aquí també li indicarem que els paquets que volem que instal·li tinguin la ruta del nostre servidor, així ens assegurem de que els extreu del servidor.
<img alt="SAC2" src="../SAC2.png" />
<img alt="SAC3" src="../SAC3.png" /></p>
</li>
<li>
<p>Finalment, llançarem un update al client per veure si realment utilitza les rutes que apunten al servidor, i ens fixarem si els paquets contenen la IP d'aquest.
<img alt="SAC4" src="../SAC4.png" />
<img alt="SAC5" src="../SAC5.png" /></p>
</li>
<li>
<p>Per acabar, veurem que si que agafa els paquets del servidor, sol ens quedaria verificar que s'ha instal·lat el chrome correctament.
<img alt="SAC6" src="../SAC6.png" /></p>
</li>
</ul>
<h1 id="auditoria">Auditoria</h1>
<h2 id="-lynis">- Lynis</h2>
<ul>
<li>El primer pas que hem dur a terme es fer un update, un cop acabat instal·larem el Lynis
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sudo apt install lynis -y
</code></pre></div>
<img alt="lynis" src="../lynis.png" /></li>
<li>Un cop tenim el paquet instal·lat executarem el programa per fer un escaneig al sistema.
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>lynis audit system
</code></pre></div>
<img alt="lynis1" src="../lynis1.png" /></li>
<li>
<p>Un cop executada aquesta comanda el programa començarà un escaneig de tot el sistema i els seus apartats, per cada part ens detallarà l'estat si esta correcte, no trobat, o amb algun error. I per últim ens mostrarà un resum amb els detalls del que ha escanejat.
<img alt="lynis3" src="../lynis3.png" />
<img alt="lynis2" src="../lynis2.png" /></p>
</li>
<li>
<p>En cas de voler fer un escaneig ràpid podem utilitzar la següent comanda. El resultat es similar a l'anterior.
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>lynis -Q
</code></pre></div>
<img alt="lynis4" src="../lynis4.png" /></p>
</li>
<li>
<p>Als dos escaneigos que hem realitzat ens trobarem que hi ha un apartat de sugerencies per millorar la seguretat del nostre dispositiu, i com podrem veure al resum detallat, ens diu el nivell de "hardening index" que vindria a ser un índex de nivell de seguretat.
<img alt="lynis5" src="../lynis5.png" />
<img alt="lynis6" src="../lynis6.png" /></p>
</li>
<li>
<p>Per millorar aquest index, podem començar instal·lant i seguint els passos de les propostes, l'únic porblema es que el paquet <code>listbugs</code> ha quedat obsolet i ara es diu <code>listchanges</code>. A continuació mostraré com instal·lo diversos paquets i el resultat de la millora del índex.</p>
</li>
</ul>
<p><img alt="lynis7" src="../lynis7.png" />
<img alt="lynis8" src="../lynis8.png" />
<img alt="lynis9" src="../lynis9.png" />
<img alt="lynis10" src="../lynis10.png" />
<img alt="lynis11" src="../lynis11.png" />
<img alt="lynis12" src="../lynis12.png" /></p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      
&copy; 2024 <a href="https://marcgnd.github.io/mkdocs-marc-sabate/Sprint1/#-llicencia-cc"  target="_blank" rel="noopener">Creative commons </a> 
<img src="./CC.png" width="70" height="70">

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>